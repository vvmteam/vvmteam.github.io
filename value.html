<script>document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InZpIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+RmlzY2ggVmFsdWUgKHYxOS4zIC0gQ3Jvc3MgRGF0YSk8L3RpdGxlPgogICAgPHN0eWxlPgogICAgICAgIC8qIC0tLSBD4bqkVSBIw4xOSCBHSUFPIERJ4buGTiAoR0nhu64gTkdVWcOKTikgLS0tICovCiAgICAgICAgYm9keSB7IGZvbnQtZmFtaWx5OiAnU2Vnb2UgVUknLCBUYWhvbWEsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjsgYmFja2dyb3VuZC1jb2xvcjogI2ViZWRlZjsgbWFyZ2luOiAwOyBwYWRkaW5nOiAwOyBjb2xvcjogIzMzMzsgfQogICAgICAgICNzdGlja3ktd3JhcHBlciB7IHBvc2l0aW9uOiBzdGlja3k7IHRvcDogMDsgei1pbmRleDogMTAwMDA7IGJhY2tncm91bmQ6IHJnYmEoMjM1LCAyMzcsIDIzOSwgMC45NSk7IGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsgcGFkZGluZy10b3A6IDE1cHg7IGJveC1zaGFkb3c6IDAgNHB4IDEwcHggcmdiYSgwLDAsMCwwLjA1KTsgdHJhbnNpdGlvbjogYWxsIDAuMnM7IH0KICAgICAgICAuY29udHJvbHMgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDEwcHg7IHBhZGRpbmc6IDAgMjBweDsgfQogICAgICAgIGlucHV0W3R5cGU9InRleHQiXSB7IHBhZGRpbmc6IDEwcHggMjVweDsgd2lkdGg6IDEwMCU7IG1heC13aWR0aDogNTAwcHg7IGJvcmRlci1yYWRpdXM6IDUwcHg7IGJvcmRlcjogMnB4IHNvbGlkICNkZmU2ZTk7IG91dGxpbmU6IG5vbmU7IGZvbnQtc2l6ZTogMTZweDsgdHJhbnNpdGlvbjogMC4zczsgYmFja2dyb3VuZDogd2hpdGU7IG1hcmdpbi1ib3R0b206IDEwcHg7IH0KICAgICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il06Zm9jdXMgeyBib3JkZXItY29sb3I6ICM3NGI5ZmY7IGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgxMTYsIDE4NSwgMjU1LCAwLjMpOyB9CiAgICAgICAgLmZpbHRlci1zZWN0aW9uIHsgZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiA4cHg7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IH0KICAgICAgICAuYnRuLXJvdyB7IGRpc3BsYXk6IGZsZXg7IGdhcDogMTBweDsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZmxleC13cmFwOiB3cmFwOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgfQogICAgICAgIC5zZXBhcmF0b3IgeyB3aWR0aDogMXB4OyBoZWlnaHQ6IDI0cHg7IGJhY2tncm91bmQtY29sb3I6ICNiMmJlYzM7IG1hcmdpbjogMCA1cHg7IH0KICAgICAgICBidXR0b24geyBwYWRkaW5nOiA4cHggMjBweDsgY3Vyc29yOiBwb2ludGVyOyBib3JkZXI6IG5vbmU7IGJhY2tncm91bmQ6IHdoaXRlOyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXdlaWdodDogNjAwOyBjb2xvcjogIzYzNmU3MjsgdHJhbnNpdGlvbjogMC4yczsgYm94LXNoYWRvdzogMCAycHggNXB4IHJnYmEoMCwwLDAsMC4wNSk7IGZvbnQtc2l6ZTogMTRweDsgfQogICAgICAgIGJ1dHRvbjpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6ICNmMWYyZjY7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMnB4KTsgfQogICAgICAgIGJ1dHRvbi5tb2RlLWJ0bi5hY3RpdmUgeyBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQoMTM1ZGVnLCAjMDk4NGUzLCAjNzRiOWZmKTsgY29sb3I6IHdoaXRlOyB9CiAgICAgICAgYnV0dG9uLnRhYi1idG4uYWN0aXZlIHsgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDEzNWRlZywgIzZjNWNlNywgI2EyOWJmZSk7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIGJ1dHRvbiNtb2RlLW9mZmljaWFsLmFjdGl2ZSB7IGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICNlMTcwNTUsICNmZjc2NzUpOyBjb2xvcjogd2hpdGU7IGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgyMjUsIDExMiwgODUsIDAuNCk7IH0KICAgICAgICAuY29sdW1uLWhlYWRlcnMgeyBtYXgtd2lkdGg6IDEyMDBweDsgbWFyZ2luOiAxMHB4IGF1dG8gMDsgZGlzcGxheTogZmxleDsgYmFja2dyb3VuZDogIzJkMzQzNjsgY29sb3I6ICNlY2YwZjE7IGZvbnQtd2VpZ2h0OiA4MDA7IHBhZGRpbmc6IDEycHggMjVweDsgYm9yZGVyLXJhZGl1czogMTJweCAxMnB4IDAgMDsgZm9udC1zaXplOiAxM3B4OyB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlOyBsZXR0ZXItc3BhY2luZzogMXB4OyB9CiAgICAgICAgI2RhdGEtY29udGFpbmVyIHsgbWF4LXdpZHRoOiAxMjAwcHg7IG1hcmdpbjogMCBhdXRvOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogMCAwIDE2cHggMTZweDsgYm94LXNoYWRvdzogMCA4cHggMzBweCByZ2JhKDAsMCwwLDAuMDUpOyBtaW4taGVpZ2h0OiAzMDBweDsgcGFkZGluZy1ib3R0b206IDMwcHg7IG92ZXJmbG93OiB2aXNpYmxlOyB9CiAgICAgICAgLnRpZXItaGVhZGVyIHsgYmFja2dyb3VuZDogI2RmZTZlOTsgY29sb3I6ICMyZDM0MzY7IGZvbnQtd2VpZ2h0OiA5MDA7IHRleHQtYWxpZ246IGNlbnRlcjsgcGFkZGluZzogMTBweDsgZm9udC1zaXplOiAxLjJlbTsgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkICNiMmJlYzM7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZmZmOyBib3gtc2hhZG93OiBub25lOyBwb3NpdGlvbjogc3RpY2t5OyB0b3A6IHZhcigtLWhlYWRlci1vZmZzZXQsIDE4MHB4KTsgei1pbmRleDogMTAwMDsgfQogICAgICAgIC5yb3cgeyBkaXNwbGF5OiBmbGV4OyBwYWRkaW5nOiAxNXB4IDI1cHg7IGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZjFmMmY2OyBhbGlnbi1pdGVtczogY2VudGVyOyB0cmFuc2l0aW9uOiAwLjJzOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgfQogICAgICAgIC5yb3c6aG92ZXIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOyBwb3NpdGlvbjogcmVsYXRpdmU7IHotaW5kZXg6IDUwMDA7IGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLDAsMCwwLjEpOyB9CiAgICAgICAgLmNvbC1uYW1lIHsgZmxleDogMjsgZm9udC13ZWlnaHQ6IDcwMDsgY29sb3I6ICMyZDM0MzY7IHBvc2l0aW9uOiByZWxhdGl2ZTsgfQogICAgICAgIC5jb2wtbWlkIHsgZmxleDogMTsgdGV4dC1hbGlnbjogY2VudGVyOyBjb2xvcjogIzYzNmU3MjsgZm9udC13ZWlnaHQ6IDYwMDsgfQogICAgICAgIC5jb2wtZW5kIHsgZmxleDogMC44OyB0ZXh0LWFsaWduOiByaWdodDsgZm9udC13ZWlnaHQ6IDgwMDsgY29sb3I6ICNlMTcwNTU7IH0KICAgICAgICAuY29sLXN0YXR1cyB7IGZsZXg6IDAuODsgdGV4dC1hbGlnbjogY2VudGVyOyBmb250LXdlaWdodDogNzAwOyBjb2xvcjogIzAwYjg5NDsgZm9udC1zaXplOiAwLjllbTsgfQogICAgICAgIC5jbGljay10cmlnZ2VyIHsgY3Vyc29yOiBwb2ludGVyOyBjb2xvcjogIzA5ODRlMzsgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IHRleHQtZGVjb3JhdGlvbi1zdHlsZTogZG90dGVkOyB9CiAgICAgICAgLmNsaWNrLXRyaWdnZXI6aG92ZXIgeyBjb2xvcjogI2Q2MzAzMTsgfQogICAgICAgIC5ob3Zlci10cmlnZ2VyIHsgY3Vyc29yOiBoZWxwOyB9CiAgICAgICAgLmhvdmVyLXdyYXBwZXIgeyBwb3NpdGlvbjogcmVsYXRpdmU7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgfQogICAgICAgIC5ob3Zlci1pbWFnZXMgeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IHotaW5kZXg6IDExMDAwOyBiYWNrZ3JvdW5kOiB3aGl0ZTsgcGFkZGluZzogMTVweDsgYm9yZGVyLXJhZGl1czogMTZweDsgYm94LXNoYWRvdzogMCAyMHB4IDYwcHggcmdiYSgwLDAsMCwwLjMpOyBib3JkZXI6IDFweCBzb2xpZCByZ2JhKDAsMCwwLDAuMDgpOyBhbmltYXRpb246IGZhZGVJbiAwLjJzIGVhc2Utb3V0OyBnYXA6IDE1cHg7IHBvaW50ZXItZXZlbnRzOiBub25lOyB9CiAgICAgICAgLmhvdmVyLWltYWdlcy5hY3RpdmUgeyBkaXNwbGF5OiBncmlkOyB9CiAgICAgICAgLmhvdmVyLWltYWdlcy5zaW5nbGUtaW1nIHsgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiAxZnI7IHdpZHRoOiAyODBweDsgfQogICAgICAgIC5ob3Zlci1pbWFnZXMuZG91YmxlLWltZyB7IGdyaWQtdGVtcGxhdGUtY29sdW1uczogMWZyIDFmcjsgd2lkdGg6IDUwMHB4OyB9CiAgICAgICAgCiAgICAgICAgLyogTU9EQUwgU1RZTEVTICovCiAgICAgICAgLm1vZGFsLW92ZXJsYXkgeyBkaXNwbGF5OiBub25lOyBwb3NpdGlvbjogZml4ZWQ7IHRvcDogMDsgbGVmdDogMDsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgYmFja2dyb3VuZDogcmdiYSgwLCAwLCAwLCAwLjUpOyB6LWluZGV4OiAyMDAwMDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG9wYWNpdHk6IDA7IHRyYW5zaXRpb246IG9wYWNpdHkgMC4zczsgfQogICAgICAgIC5tb2RhbC1vdmVybGF5Lm9wZW4geyBkaXNwbGF5OiBmbGV4OyBvcGFjaXR5OiAxOyB9CiAgICAgICAgLm1vZGFsLWNvbnRlbnQgeyBiYWNrZ3JvdW5kOiB3aGl0ZTsgd2lkdGg6IDk1JTsgbWF4LXdpZHRoOiA5MDBweDsgYm9yZGVyLXJhZGl1czogMTZweDsgYm94LXNoYWRvdzogMCAyNXB4IDUwcHggcmdiYSgwLDAsMCwwLjUpOyBvdmVyZmxvdzogaGlkZGVuOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyB0cmFuc2Zvcm06IHNjYWxlKDAuOSk7IHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjNzIGN1YmljLWJlemllcigwLjE3NSwgMC44ODUsIDAuMzIsIDEuMjc1KTsgbWF4LWhlaWdodDogOTB2aDsgfQogICAgICAgIC5tb2RhbC1vdmVybGF5Lm9wZW4gLm1vZGFsLWNvbnRlbnQgeyB0cmFuc2Zvcm06IHNjYWxlKDEpOyB9CiAgICAgICAgLm1vZGFsLWhlYWRlciB7IHBhZGRpbmc6IDE1cHggMjBweDsgYmFja2dyb3VuZDogIzJkMzQzNjsgY29sb3I6IHdoaXRlOyBmb250LXdlaWdodDogYm9sZDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBhbGlnbi1pdGVtczogY2VudGVyOyBmbGV4LXNocmluazogMDsgfQogICAgICAgIC5jbG9zZS1tb2RhbC1idG4geyBiYWNrZ3JvdW5kOiBub25lOyBib3JkZXI6IG5vbmU7IGNvbG9yOiB3aGl0ZTsgZm9udC1zaXplOiAyNHB4OyBjdXJzb3I6IHBvaW50ZXI7IH0KICAgICAgICAKICAgICAgICAubW9kYWwtYm9keSB7IGRpc3BsYXk6IGZsZXg7IHBhZGRpbmc6IDIwcHg7IGdhcDogMjBweDsgb3ZlcmZsb3cteTogaGlkZGVuOyBtYXgtaGVpZ2h0OiA4MHZoOyB9CiAgICAgICAgLm1vZGFsLWxlZnQgeyAKICAgICAgICAgICAgZmxleDogMS41OyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDE1cHg7IAogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjhmOWZhOyBib3JkZXItcmFkaXVzOiAxMnB4OyBwYWRkaW5nOiAxNXB4OyAKICAgICAgICAgICAgb3ZlcmZsb3cteTogYXV0bzsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgICAgICAgfQogICAgICAgIC5tb2RhbC1sZWZ0Ojotd2Via2l0LXNjcm9sbGJhciB7IHdpZHRoOiA2cHg7IH0KICAgICAgICAubW9kYWwtbGVmdDo6LXdlYmtpdC1zY3JvbGxiYXItdGh1bWIgeyBiYWNrZ3JvdW5kLWNvbG9yOiAjYjJiZWMzOyBib3JkZXItcmFkaXVzOiAxMHB4OyB9CiAgICAgICAgLm1vZGFsLXJpZ2h0IHsgZmxleDogMTsgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCAjZWVlOyBwYWRkaW5nLWxlZnQ6IDIwcHg7IG92ZXJmbG93LXk6IGF1dG87IH0KICAgICAgICAKICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogNzY4cHgpIHsgCiAgICAgICAgICAgIC5tb2RhbC1jb250ZW50IHsgbWF4LWhlaWdodDogOTV2aDsgfQogICAgICAgICAgICAubW9kYWwtYm9keSB7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IG92ZXJmbG93LXk6IGF1dG87IHBhZGRpbmc6IDE1cHg7IH0gCiAgICAgICAgICAgIC5tb2RhbC1sZWZ0IHsgd2lkdGg6IDEwMCU7IGZsZXg6IG5vbmU7IGhlaWdodDogYXV0bzsgb3ZlcmZsb3c6IHZpc2libGU7IG1hcmdpbi1ib3R0b206IDIwcHg7IG1pbi1oZWlnaHQ6IDIwMHB4OyB9CiAgICAgICAgICAgIC5tb2RhbC1yaWdodCB7IGJvcmRlci1sZWZ0OiBub25lOyBib3JkZXItdG9wOiAxcHggc29saWQgI2VlZTsgcGFkZGluZy1sZWZ0OiAwOyBwYWRkaW5nLXRvcDogMjBweDsgb3ZlcmZsb3c6IHZpc2libGU7IGZsZXg6IG5vbmU7IH0gCiAgICAgICAgICAgIC52YWx1ZS1jaXJjbGUgeyB3aWR0aDogMTAwcHg7IGhlaWdodDogMTAwcHg7IH0gCiAgICAgICAgICAgIC52YWwtbnVtIHsgZm9udC1zaXplOiAxLjVlbTsgfQogICAgICAgIH0KCiAgICAgICAgLm1vZGFsLXRpdGxlIHsgZm9udC1zaXplOiAxLjJlbTsgZm9udC13ZWlnaHQ6IDgwMDsgY29sb3I6ICMyZDM0MzY7IG1hcmdpbi1ib3R0b206IDE1cHg7IGJvcmRlci1ib3R0b206IDJweCBzb2xpZCAjMDk4NGUzOyBwYWRkaW5nLWJvdHRvbTogNXB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IH0KICAgICAgICAuc3RhdC1yb3cgeyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47IG1hcmdpbi1ib3R0b206IDEycHg7IGZvbnQtc2l6ZTogMS4xZW07IGJvcmRlci1ib3R0b206IDFweCBkYXNoZWQgI2VlZTsgcGFkZGluZy1ib3R0b206IDVweDsgfQogICAgICAgIC5zdGF0LWxhYmVsIHsgY29sb3I6ICM2MzZlNzI7IGZvbnQtd2VpZ2h0OiA2MDA7IH0KICAgICAgICAuc3RhdC12YWx1ZSB7IGZvbnQtd2VpZ2h0OiA3MDA7IGNvbG9yOiAjMmQzNDM2OyBmb250LWZhbWlseTogJ0NvbnNvbGFzJywgbW9ub3NwYWNlOyB9CiAgICAgICAgLm1vZGFsLWxvYWRpbmcgeyB0ZXh0LWFsaWduOiBjZW50ZXI7IHBhZGRpbmc6IDUwcHg7IGZvbnQtc2l6ZTogMS4yZW07IGNvbG9yOiAjNjM2ZTcyOyB3aWR0aDogMTAwJTsgfQogICAgICAgIC5zcGlubmVyIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogMzBweDsgaGVpZ2h0OiAzMHB4OyBib3JkZXI6IDNweCBzb2xpZCByZ2JhKDAsMCwwLDAuMSk7IGJvcmRlci1yYWRpdXM6IDUwJTsgYm9yZGVyLXRvcC1jb2xvcjogIzA5ODRlMzsgYW5pbWF0aW9uOiBzcGluIDFzIGVhc2UtaW4tb3V0IGluZmluaXRlOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9CiAgICAgICAgQGtleWZyYW1lcyBzcGluIHsgdG8geyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9IH0KCiAgICAgICAgLmltZy1ib3ggeyB3aWR0aDogMTAwJTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IHBvc2l0aW9uOiByZWxhdGl2ZTsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQogICAgICAgIC5pbWctYm94IGltZyB7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IGF1dG87IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA1cHggMTVweCByZ2JhKDAsMCwwLDAuMSk7IG9iamVjdC1maXQ6IGNvbnRhaW47IG1heC1oZWlnaHQ6IDMwMHB4OyB9CiAgICAgICAgLmltZy1sYWJlbCB7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgYm90dG9tOiAxMHB4OyBsZWZ0OiA1MCU7IHRyYW5zZm9ybTogdHJhbnNsYXRlWCgtNTAlKTsgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjYpOyBjb2xvcjogd2hpdGU7IHBhZGRpbmc6IDRweCAxMHB4OyBib3JkZXItcmFkaXVzOiAyMHB4OyBmb250LXNpemU6IDEycHg7IHdoaXRlLXNwYWNlOiBub3dyYXA7IHBvaW50ZXItZXZlbnRzOiBub25lOyB9CiAgICAgICAgQGtleWZyYW1lcyBmYWRlSW4geyBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDEwcHgpOyB9IHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9IH0KICAgICAgICAKICAgICAgICAuZmxvYXRpbmctYnRuIHsgcG9zaXRpb246IGZpeGVkOyByaWdodDogMzBweDsgei1pbmRleDogOTk5OTsgd2lkdGg6IDUwcHg7IGhlaWdodDogNTBweDsgYm9yZGVyLXJhZGl1czogNTAlOyBib3JkZXI6IG5vbmU7IGZvbnQtc2l6ZTogMjRweDsgY3Vyc29yOiBwb2ludGVyOyBib3gtc2hhZG93OiAwIDVweCAxNXB4IHJnYmEoMCwwLDAsMC4yKTsgZGlzcGxheTogZmxleDsgYWxpZ24taXRlbXM6IGNlbnRlcjsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHRyYW5zaXRpb246IDAuM3M7IGNvbG9yOiB3aGl0ZTsgfQogICAgICAgIC5mbG9hdGluZy1idG46aG92ZXIgeyB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IH0KICAgICAgICAjcmVmcmVzaC1idG4geyBib3R0b206IDMwcHg7IGJhY2tncm91bmQ6ICNkNjMwMzE7IH0KICAgICAgICAjbGFuZy1idG4geyBib3R0b206IDkwcHg7IGJhY2tncm91bmQ6ICMwOTg0ZTM7IGZvbnQtc2l6ZTogMjBweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IH0KCiAgICAgICAgLnNpdGUtZm9vdGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiA0MHB4IDIwcHggODBweCAyMHB4OyBjb2xvcjogIzYzNmU3MjsgZm9udC1zaXplOiAxNHB4OyBtYXJnaW4tdG9wOiAzMHB4OyBib3JkZXItdG9wOiAxcHggc29saWQgI2RmZTZlOTsgYmFja2dyb3VuZC1jb2xvcjogI2ViZWRlZjsgfQogICAgICAgIC5zaXRlLWZvb3RlciBiIHsgY29sb3I6ICMyZDM0MzY7IGZvbnQtd2VpZ2h0OiA3MDA7IH0KCiAgICAgICAgI2NvbmZpcm0tbW9kYWwgLm1vZGFsLWNvbnRlbnQgeyBtYXgtd2lkdGg6IDQwMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7IG92ZXJmbG93OiB2aXNpYmxlOyB9CiAgICAgICAgI2NvbmZpcm0tbW9kYWwgLm1vZGFsLWhlYWRlciB7IGJhY2tncm91bmQ6ICNkNjMwMzE7IGNvbG9yOiB3aGl0ZTsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IHBhZGRpbmc6IDE1cHg7IH0KICAgICAgICAjY29uZmlybS1tb2RhbCAubW9kYWwtYm9keSB7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMTVweDsgcGFkZGluZzogMjVweCAyMHB4OyBvdmVyZmxvdzogdmlzaWJsZTsgaGVpZ2h0OiBhdXRvOyB9CiAgICAgICAgLmNvbmZpcm0tYnRuIHsgcGFkZGluZzogMTBweCAyNXB4OyBib3JkZXItcmFkaXVzOiA4cHg7IGZvbnQtd2VpZ2h0OiBib2xkOyBjdXJzb3I6IHBvaW50ZXI7IGJvcmRlcjogbm9uZTsgZm9udC1zaXplOiAxNXB4OyB9CiAgICAgICAgLmJ0bi15ZXMgeyBiYWNrZ3JvdW5kOiAjZDYzMDMxOyBjb2xvcjogd2hpdGU7IH0KICAgICAgICAuYnRuLW5vIHsgYmFja2dyb3VuZDogIzYzNmU3MjsgY29sb3I6IHdoaXRlOyB9CgogICAgICAgIC5tb2RhbC1oZWFkZXItaW5mbyB7IGRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IG1hcmdpbi1ib3R0b206IDI1cHg7IHBhZGRpbmctYm90dG9tOiAyMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2VlZTsgfQogICAgICAgIC52YWx1ZS1jaXJjbGUgeyB3aWR0aDogMTQwcHg7IGhlaWdodDogMTQwcHg7IGJvcmRlci1yYWRpdXM6IDUwJTsgY29sb3I6IHdoaXRlOyBkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgYm94LXNoYWRvdzogMCAxMHB4IDI1cHggcmdiYSgwLCAwLCAwLCAwLjIpOyBtYXJnaW4tYm90dG9tOiAxMHB4OyB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4zczsgdGV4dC1hbGlnbjogY2VudGVyOyBwYWRkaW5nOiA1cHg7IG92ZXJmbG93OiBoaWRkZW47IH0KICAgICAgICAudmFsdWUtY2lyY2xlOmhvdmVyIHsgdHJhbnNmb3JtOiBzY2FsZSgxLjA1KTsgfQogICAgICAgIC52YWwtbnVtIHsgZm9udC1zaXplOiAyZW07IGZvbnQtd2VpZ2h0OiA4MDA7IGxpbmUtaGVpZ2h0OiAxOyB0ZXh0LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwwLDAsMC4yKTsgfQogICAgICAgIC52YWwtbm90ZSB7IGZvbnQtc2l6ZTogMC4zNWVtOyBtYXJnaW4tdG9wOiA1cHg7IG9wYWNpdHk6IDAuOTsgbGluZS1oZWlnaHQ6IDEuMjsgd2hpdGUtc3BhY2U6IG5vcm1hbDsgbWF4LXdpZHRoOiA5MCU7IH0KICAgICAgICAuZGVtYW5kLWluZm8geyBmb250LXNpemU6IDEuMWVtOyBjb2xvcjogIzYzNmU3MjsgZm9udC13ZWlnaHQ6IDYwMDsgYmFja2dyb3VuZDogI2RmZTZlOTsgcGFkZGluZzogNXB4IDE1cHg7IGJvcmRlci1yYWRpdXM6IDIwcHg7IH0KICAgIDwvc3R5bGU+CjwvaGVhZD4KPGJvZHk+CiAgICA8ZGl2IGlkPSJzdGlja3ktd3JhcHBlciI+CiAgICAgICAgPGRpdiBjbGFzcz0iY29udHJvbHMiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9InNlYXJjaElucHV0IiBkYXRhLWxhbmcta2V5PSJzZWFyY2hfcGxhY2Vob2xkZXIiIHBsYWNlaG9sZGVyPSJUw6xtIGtp4bq/bSB0w6puLCByb2QsIHZhbHVlLi4uIiBvbmtleXVwPSJmaWx0ZXJEYXRhKCkiPgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJmaWx0ZXItc2VjdGlvbiI+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tcm93Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJtb2RlLW9idGFpbiIgY2xhc3M9Im1vZGUtYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoTW9kZSgnb2J0YWluJykiIGRhdGEtbGFuZy1rZXk9Im1vZGVfb2J0YWluIj5Dw6FjaCBuaOG6rW48L2J1dHRvbj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzZXBhcmF0b3IiPjwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9Im1vZGUtb2ZmaWNpYWwiIGNsYXNzPSJtb2RlLWJ0biIgb25jbGljaz0ic3dpdGNoTW9kZSgnb2ZmaWNpYWwnKSI+T2ZmaWNpYWwgVmFsdWU8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tcm93IiBpZD0idGFicy1zdGFuZGFyZCI+CiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBpZD0idGFiLWJvYXQiIGNsYXNzPSJ0YWItYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVGFiKCdib2F0JykiIGRhdGEtbGFuZy1rZXk9InRhYl9ib2F0Ij5UaHV54buBbjwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InRhYi1za2luIiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdza2luJykiIGRhdGEtbGFuZy1rZXk9InRhYl9za2luIj5Ta2luPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJidG4tcm93IiBpZD0idGFicy1vZmZpY2lhbCIgc3R5bGU9ImRpc3BsYXk6IG5vbmU7Ij4KICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGlkPSJ0YWItY29zbWV0aWMiIGNsYXNzPSJ0YWItYnRuIGFjdGl2ZSIgb25jbGljaz0ic3dpdGNoVGFiKCdjb3NtZXRpYycpIiBkYXRhLWxhbmcta2V5PSJ0YWJfY29zbWV0aWMiPlbhuq10IHBo4bqpbTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gaWQ9InRhYi1maXNoIiBjbGFzcz0idGFiLWJ0biIgb25jbGljaz0ic3dpdGNoVGFiKCdmaXNoJykiIGRhdGEtbGFuZy1rZXk9InRhYl9maXNoIj5Dw6E8L2J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgICA8ZGl2IGNsYXNzPSJjb2x1bW4taGVhZGVycyIgaWQ9ImhlYWRlci1yb3ciPjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBpZD0iZGF0YS1jb250YWluZXIiPjwvZGl2PgoKICAgIDxmb290ZXIgY2xhc3M9InNpdGUtZm9vdGVyIj4KICAgICAgICA8c3BhbiBkYXRhLWxhbmcta2V5PSJmb290ZXJfdGV4dCI+Q3JlYXRlIGFuZCBNYWludGFpbmNlIGJ5PC9zcGFuPiA8Yj5GdXl1dHlhPC9iPiAtIDxzcGFuIGRhdGEtbGFuZy1rZXk9Imxhc3RfdXBkYXRlIj5MYXN0IFVwZGF0ZTwvc3Bhbj46IDxzcGFuIGlkPSJsYXN0LXVwZGF0ZSI+Li4uPC9zcGFuPgogICAgPC9mb290ZXI+CgogICAgPGJ1dHRvbiBpZD0ibGFuZy1idG4iIGNsYXNzPSJmbG9hdGluZy1idG4iIG9uY2xpY2s9InRvZ2dsZUxhbmd1YWdlKCkiPlZJPC9idXR0b24+CiAgICA8YnV0dG9uIGlkPSJyZWZyZXNoLWJ0biIgY2xhc3M9ImZsb2F0aW5nLWJ0biIgb25jbGljaz0icmVxdWVzdFJlbG9hZCgpIj7ihrs8L2J1dHRvbj4KCiAgICA8ZGl2IGlkPSJpbmZvLW1vZGFsIiBjbGFzcz0ibW9kYWwtb3ZlcmxheSIgb25jbGljaz0iY2xvc2VNb2RhbChldmVudCkiPgogICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWNvbnRlbnQiIG9uY2xpY2s9ImV2ZW50LnN0b3BQcm9wYWdhdGlvbigpIj4KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtaGVhZGVyIj4KICAgICAgICAgICAgICAgIDxzcGFuIGlkPSJtb2RhbC1pdGVtLW5hbWUiPkl0ZW0gTmFtZTwvc3Bhbj4KICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNsb3NlLW1vZGFsLWJ0biIgb25jbGljaz0iY2xvc2VNb2RhbCgpIj4mdGltZXM7PC9idXR0b24+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5IiBpZD0ibW9kYWwtYm9keS1jb250ZW50Ij48L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgaWQ9ImNvbmZpcm0tbW9kYWwiIGNsYXNzPSJtb2RhbC1vdmVybGF5Ij4KICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1jb250ZW50IiBvbmNsaWNrPSJldmVudC5zdG9wUHJvcGFnYXRpb24oKSI+CiAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlciI+CiAgICAgICAgICAgICAgICA8c3BhbiBkYXRhLWxhbmcta2V5PSJjb25maXJtX3RpdGxlIj7imqDvuI8gQ+G6ok5IIELDgU88L3NwYW4+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1ib2R5Ij4KICAgICAgICAgICAgICAgIDxwIHN0eWxlPSJmb250LXNpemU6IDEuMWVtOyBjb2xvcjogIzJkMzQzNjsiIGRhdGEtbGFuZy1rZXk9ImNvbmZpcm1fYXNrIj5C4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdOG6o2kgbOG6oWk/PC9wPgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImNvbG9yOiAjNjM2ZTcyOyBmb250LXNpemU6IDAuOWVtOyBtYXJnaW4tYm90dG9tOiAyMHB4OyIgZGF0YS1sYW5nLWtleT0iY29uZmlybV9kZXNjIj4KICAgICAgICAgICAgICAgICAgICBIw6BuaCDEkeG7mW5nIG7DoHkgc+G6vSB4w7NhIHRvw6BuIGLhu5kgQ2FjaGUgY+G7pWMgYuG7mSB2w6AgdOG6o2kgbeG7m2kgZOG7ryBsaeG7h3UgdOG7qyBHb29nbGUgU2hlZXQgJiBXaWtpLgogICAgICAgICAgICAgICAgPC9wPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGdhcDogMTVweDsiPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNvbmZpcm0tYnRuIGJ0bi15ZXMiIG9uY2xpY2s9ImV4ZWN1dGVSZWxvYWQoKSIgZGF0YS1sYW5nLWtleT0iYnRuX3llcyI+xJDhu5NuZyDDvTwvYnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImNvbmZpcm0tYnRuIGJ0bi1ubyIgb25jbGljaz0iY2xvc2VDb25maXJtTW9kYWwoKSIgZGF0YS1sYW5nLWtleT0iYnRuX25vIj5I4buneSBi4buPPC9idXR0b24+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8c2NyaXB0PgogICAgICAgIGNvbnN0IFRSQU5TTEFUSU9OUyA9IHsKICAgICAgICAgICAgdmk6IHsKICAgICAgICAgICAgICAgIHNlYXJjaF9wbGFjZWhvbGRlcjogIlTDrG0ga2nhur9tIHTDqm4sIHJvZCwgdmFsdWUuLi4iLAogICAgICAgICAgICAgICAgbW9kZV90aWVyOiAiWOG6v3AgaOG6oW5nIiwKICAgICAgICAgICAgICAgIG1vZGVfb2J0YWluOiAiQ8OhY2ggbmjhuq1uIiwKICAgICAgICAgICAgICAgIHRhYl9ib2F0OiAiVGh1eeG7gW4iLAogICAgICAgICAgICAgICAgdGFiX3NraW46ICJTa2luIiwKICAgICAgICAgICAgICAgIHRhYl9jb3NtZXRpYzogIlbhuq10IHBo4bqpbSIsCiAgICAgICAgICAgICAgICB0YWJfZmlzaDogIkPDoSIsCiAgICAgICAgICAgICAgICBmb290ZXJfdGV4dDogIlBow6F0IHRyaeG7g24gdsOgIGLhuqNvIHRyw6wgYuG7n2kiLAogICAgICAgICAgICAgICAgbGFzdF91cGRhdGU6ICJD4bqtcCBuaOG6rXQgY3Xhu5FpIiwKICAgICAgICAgICAgICAgIGNvbmZpcm1fdGl0bGU6ICLimqDvuI8gQ+G6ok5IIELDgU8iLAogICAgICAgICAgICAgICAgY29uZmlybV9hc2s6ICJC4bqhbiBjw7MgY2jhuq9jIGNo4bqvbiBtdeG7kW4gdOG6o2kgbOG6oWk/IiwKICAgICAgICAgICAgICAgIGNvbmZpcm1fZGVzYzogIkjDoG5oIMSR4buZbmcgbsOgeSBz4bq9IHjDs2EgdG/DoG4gYuG7mSBDYWNoZSBj4bulYyBi4buZIHbDoCB04bqjaSBt4bubaSBk4buvIGxp4buHdS4iLAogICAgICAgICAgICAgICAgYnRuX3llczogIsSQ4buTbmcgw70iLAogICAgICAgICAgICAgICAgYnRuX25vOiAiSOG7p3kgYuG7jyIsCiAgICAgICAgICAgICAgICBjb2xfaXRlbTogIlTDqm4gVuG6rXQgUGjhuqltIiwKICAgICAgICAgICAgICAgIGNvbF92YWx1ZTogIkdpw6EgVHLhu4siLAogICAgICAgICAgICAgICAgY29sX2RlbWFuZDogIk5odSBD4bqndSIsCiAgICAgICAgICAgICAgICBjb2xfc3RhdHVzOiAiVHLhuqFuZyBUaMOhaSIsCiAgICAgICAgICAgICAgICBjb2xfc2tpbjogIlTDqm4gU2tpbiIsCiAgICAgICAgICAgICAgICBjb2xfcm9kOiAiQ+G6p24gQ8OidSIsCiAgICAgICAgICAgICAgICBzdGF0X3ByaWNlOiAiR2nDoSIsCiAgICAgICAgICAgICAgICBzdGF0X3NwZWVkOiAiVOG7kWMgxJHhu5kiLAogICAgICAgICAgICAgICAgc3RhdF90dXJuOiAiQuG6uyBsw6FpIiwKICAgICAgICAgICAgICAgIHN0YXRfYWNjZWw6ICJHaWEgdOG7kWMiLAogICAgICAgICAgICAgICAgc3RhdF9zZWF0OiAiQ2jhu5cgbmfhu5NpIiwKICAgICAgICAgICAgICAgIG1vZGFsX3RpdGxlX3dpa2k6ICJUaMO0bmcgc+G7kSAoRmlzY2hpcGVkaWEpIiwKICAgICAgICAgICAgICAgIG1vZGFsX2xvYWRpbmc6ICLEkGFuZyB04bqjaSBk4buvIGxp4buHdS4uLiIsCiAgICAgICAgICAgICAgICBtb2RhbF9sb2FkaW5nX3N1YjogIlPhur0ga2jDtG5nIHThuqNpIGzhuqFpIGNobyDEkeG6v24gdGjhu6kgMiB0deG6p24gc2F1IiwKICAgICAgICAgICAgICAgIG9wZW5fd2lraTogIk3hu58gRmlzY2hpcGVkaWEub3JnIiwKICAgICAgICAgICAgICAgIGVycm9yX3Byb3h5OiAiS2jDtG5nIHRo4buDIHThuqNpIGThu68gbGnhu4d1IChM4buXaSBQcm94eSkuIFZ1aSBsw7JuZyB0aOG7rSBs4bqhaSBzYXUuIiwKICAgICAgICAgICAgICAgIG5vX2ltYWdlOiAi8J+TtyBLaMO0bmcgY8OzIOG6o25oIiwKICAgICAgICAgICAgICAgIGltZ19nYW1lOiAiVHJvbmcgR2FtZSIsCiAgICAgICAgICAgICAgICBpbWdfbWVudTogIk1lbnUvSWNvbiIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZW46IHsKICAgICAgICAgICAgICAgIHNlYXJjaF9wbGFjZWhvbGRlcjogIlNlYXJjaCBuYW1lLCByb2QsIHZhbHVlLi4uIiwKICAgICAgICAgICAgICAgIG1vZGVfdGllcjogIlRpZXIgTGlzdCIsCiAgICAgICAgICAgICAgICBtb2RlX29idGFpbjogIk9idGFpbiBNZXRob2QiLAogICAgICAgICAgICAgICAgdGFiX2JvYXQ6ICJCb2F0cyIsCiAgICAgICAgICAgICAgICB0YWJfc2tpbjogIlNraW5zIiwKICAgICAgICAgICAgICAgIHRhYl9jb3NtZXRpYzogIkNvc21ldGljIiwKICAgICAgICAgICAgICAgIHRhYl9maXNoOiAiRmlzaCIsCiAgICAgICAgICAgICAgICBmb290ZXJfdGV4dDogIkNyZWF0ZWQgYW5kIE1haW50YWluZWQgYnkiLAogICAgICAgICAgICAgICAgbGFzdF91cGRhdGU6ICJMYXN0IFVwZGF0ZSIsCiAgICAgICAgICAgICAgICBjb25maXJtX3RpdGxlOiAi4pqg77iPIFdBUk5JTkciLAogICAgICAgICAgICAgICAgY29uZmlybV9hc2s6ICJBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gcmVsb2FkPyIsCiAgICAgICAgICAgICAgICBjb25maXJtX2Rlc2M6ICJUaGlzIHdpbGwgY2xlYXIgYWxsIExvY2FsIENhY2hlIGFuZCBmZXRjaCBmcmVzaCBkYXRhIGZyb20gR29vZ2xlIFNoZWV0ICYgV2lraS4iLAogICAgICAgICAgICAgICAgYnRuX3llczogIlllcyIsCiAgICAgICAgICAgICAgICBidG5fbm86ICJDYW5jZWwiLAogICAgICAgICAgICAgICAgY29sX2l0ZW06ICJJVEVNIE5BTUUiLAogICAgICAgICAgICAgICAgY29sX3ZhbHVlOiAiVkFMVUUiLAogICAgICAgICAgICAgICAgY29sX2RlbWFuZDogIkRFTUFORCIsCiAgICAgICAgICAgICAgICBjb2xfc3RhdHVzOiAiU1RBVFVTIiwKICAgICAgICAgICAgICAgIGNvbF9za2luOiAiU0tJTiBOQU1FIiwKICAgICAgICAgICAgICAgIGNvbF9yb2Q6ICJSb2QiLAogICAgICAgICAgICAgICAgc3RhdF9wcmljZTogIlByaWNlIiwKICAgICAgICAgICAgICAgIHN0YXRfc3BlZWQ6ICJTcGVlZCIsCiAgICAgICAgICAgICAgICBzdGF0X3R1cm46ICJTdGVlcmluZyIsCiAgICAgICAgICAgICAgICBzdGF0X2FjY2VsOiAiQWNjZWxlcmF0aW9uIiwKICAgICAgICAgICAgICAgIHN0YXRfc2VhdDogIlNlYXRzIiwKICAgICAgICAgICAgICAgIG1vZGFsX3RpdGxlX3dpa2k6ICJTdGF0cyAoRmlzY2hpcGVkaWEpIiwKICAgICAgICAgICAgICAgIG1vZGFsX2xvYWRpbmc6ICJMb2FkaW5nIGRhdGEuLi4iLAogICAgICAgICAgICAgICAgbW9kYWxfbG9hZGluZ19zdWI6ICJXaWxsIG5vdCByZWxvYWQgdW50aWwgbmV4dCBNb25kYXkiLAogICAgICAgICAgICAgICAgb3Blbl93aWtpOiAiT3BlbiBGaXNjaGlwZWRpYS5vcmciLAogICAgICAgICAgICAgICAgZXJyb3JfcHJveHk6ICJGYWlsZWQgdG8gbG9hZCBkYXRhIChQcm94eSBFcnJvcikuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuIiwKICAgICAgICAgICAgICAgIG5vX2ltYWdlOiAi8J+TtyBObyBJbWFnZSIsCiAgICAgICAgICAgICAgICBpbWdfZ2FtZTogIkluLUdhbWUiLAogICAgICAgICAgICAgICAgaW1nX21lbnU6ICJNZW51L0ljb24iCiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBsZXQgY3VycmVudExhbmcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnZmlzY2hfbGFuZycpIHx8ICd2aSc7CiAgICAgICAgZnVuY3Rpb24gdChrZXkpIHsgcmV0dXJuIFRSQU5TTEFUSU9OU1tjdXJyZW50TGFuZ11ba2V5XSB8fCBrZXk7IH0KICAgICAgICBmdW5jdGlvbiB0b2dnbGVMYW5ndWFnZSgpIHsKICAgICAgICAgICAgY3VycmVudExhbmcgPSAoY3VycmVudExhbmcgPT09ICd2aScpID8gJ2VuJyA6ICd2aSc7CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdmaXNjaF9sYW5nJywgY3VycmVudExhbmcpOwogICAgICAgICAgICBhcHBseUxhbmd1YWdlKCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIGFwcGx5TGFuZ3VhZ2UoKSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYW5nLWJ0bicpLmlubmVyVGV4dCA9IGN1cnJlbnRMYW5nLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWxhbmcta2V5XScpLmZvckVhY2goZWwgPT4gewogICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWxhbmcta2V5Jyk7CiAgICAgICAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0lOUFVUJykgZWwucGxhY2Vob2xkZXIgPSB0KGtleSk7CiAgICAgICAgICAgICAgICBlbHNlIGVsLmlubmVyVGV4dCA9IHQoa2V5KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHVwZGF0ZUhlYWRlcnMoKTsKICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mby1tb2RhbCcpOwogICAgICAgICAgICBpZiAobW9kYWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdvcGVuJykpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWl0ZW0tbmFtZScpLmlubmVyVGV4dDsKICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZUtleSh0aXRsZSk7IAogICAgICAgICAgICAgICAgaWYoaW1hZ2VDYWNoZVtrZXldKSByZW5kZXJNb2RhbENvbnRlbnQoa2V5KTsgCiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGNvbnN0IFNIRUVUX0NPTkZJRyA9IHsKICAgICAgICAgICAgdGllcl9ib2F0OiAgICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2VHFlZ2dEc0hDbkdfbklvdUVtUVlzQzJDM19Ha2Z0a25sWHd1U1hnRXpnWTdmVS1sbVRpUllZRko2cXNpdlNfd1ZjalBfdnlQcUZCaElML3B1Yj9naWQ9MCZzaW5nbGU9dHJ1ZSZvdXRwdXQ9Y3N2JywKICAgICAgICAgICAgdGllcl9za2luOiAgICdodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC9lLzJQQUNYLTF2VHFlZ2dEc0hDbkdfbklvdUVtUVlzQzJDM19Ha2Z0a25sWHd1U1hnRXpnWTdmVS1sbVRpUllZRko2cXNpdlNfd1ZjalBfdnlQcUZCaElML3B1Yj9naWQ9NzAxMjY3NjU5JnNpbmdsZT10cnVlJm91dHB1dD1jc3YnLAogICAgICAgICAgICBvYnRhaW5fYm9hdDogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZUcWVnZ0RzSENuR19uSW91RW1RWXNDMkMzX0drZnRrbmxYd3VTWGdFemdZN2ZVLWxtVGlSWVlGSjZxc2l2U193VmNqUF92eVBxRkJoSUwvcHViP2dpZD0xNzUyOTUxNDIxJnNpbmdsZT10cnVlJm91dHB1dD1jc3YnLAogICAgICAgICAgICBvYnRhaW5fc2tpbjogJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZUcWVnZ0RzSENuR19uSW91RW1RWXNDMkMzX0drZnRrbmxYd3VTWGdFemdZN2ZVLWxtVGlSWVlGSjZxc2l2U193VmNqUF92eVBxRkJoSUwvcHViP2dpZD0yMDk0ODYyMTYxJnNpbmdsZT10cnVlJm91dHB1dD1jc3YnLAogICAgICAgICAgICBpbWFnZXM6ICAgICAgJ2h0dHBzOi8vZG9jcy5nb29nbGUuY29tL3NwcmVhZHNoZWV0cy9kL2UvMlBBQ1gtMXZUcWVnZ0RzSENuR19uSW91RW1RWXNDMkMzX0drZnRrbmxYd3VTWGdFemdZN2ZVLWxtVGlSWVlGSjZxc2l2U193VmNqUF92eVBxRkJoSUwvcHViP2dpZD0xMzg5MDM5NjYmc2luZ2xlPXRydWUmb3V0cHV0PWNzdicsCiAgICAgICAgICAgIG9mZmljaWFsX2Nvc21ldGljOiAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMXNhT0xqY293QXhJMXZrSlprd3RnRk1BRXRtdXJBNjh6aENndVFOMG9CTVkvZWRpdD9naWQ9MCNnaWQ9MCcsCiAgICAgICAgICAgIG9mZmljaWFsX2Zpc2g6ICAgICAnaHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vc3ByZWFkc2hlZXRzL2QvMXNhT0xqY293QXhJMXZrSlprd3RnRk1BRXRtdXJBNjh6aENndVFOMG9CTVkvZWRpdD9naWQ9MTc2NzY4MjQ1MCNnaWQ9MTc2NzY4MjQ1MCcKICAgICAgICB9OwoKICAgICAgICBjb25zdCBDT0xfTUFQID0gewogICAgICAgICAgICB0aWVyOiAgIHsgbmFtZTogMCwgdmFsOiAxLCBkZW1hbmQ6IDIgfSwgCiAgICAgICAgICAgIG9idGFpbl9ib2F0OiB7IG5hbWU6IDAsIHZhbDogMSB9LCAgICAgICAKICAgICAgICAgICAgb2J0YWluX3NraW46IHsgbmFtZTogMCwgcm9kOiAxLCB2YWw6IDIgfSwKICAgICAgICAgICAgb2ZmaWNpYWw6IHsgbmFtZTogMCwgdmFsOiAxLCBkZW1hbmQ6IDIsIHN0YXR1czogMyB9LAogICAgICAgICAgICBpbWFnZXM6IHsgbmFtZTogMCwgaW1nMTogMSwgaW1nMjogMiwgd2lraTogMywgZmxhZzogNCwgbGFzdF91cGRhdGU6IDYgfSwgCiAgICAgICAgICAgIHFfZmxhZzogMTYgCiAgICAgICAgfTsKCiAgICAgICAgbGV0IGN1cnJlbnRNb2RlID0gJ29idGFpbic7IAogICAgICAgIGxldCBjdXJyZW50VGFiICA9ICdib2F0JzsKICAgICAgICBsZXQgaW1hZ2VDYWNoZSA9IHt9OyAKICAgICAgICBsZXQgZGF0YUNhY2hlID0ge307IAogICAgICAgIGxldCBTS0lOX1JPRF9NQVAgPSB7fTsgLy8gQmnhur9uIHRvw6BuIGPhu6VjIGzGsHUgZGFuaCBzw6FjaCBTa2luIC0+IFJvZAoKICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVLZXkoc3RyKSB7CiAgICAgICAgICAgIGlmICghc3RyKSByZXR1cm4gIiI7CiAgICAgICAgICAgIHJldHVybiBzdHIudHJpbSgpLnRvVXBwZXJDYXNlKCkucmVwbGFjZSgvW+KAmOKAmWBdL2csICInIik7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVTdGlja3lPZmZzZXQoKSB7CiAgICAgICAgICAgIGNvbnN0IHN0aWNreUhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGlja3ktd3JhcHBlcicpOwogICAgICAgICAgICBpZiAoc3RpY2t5SGVhZGVyKSB7CiAgICAgICAgICAgICAgICBjb25zdCBoZWlnaHQgPSBzdGlja3lIZWFkZXIub2Zmc2V0SGVpZ2h0OwogICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLWhlYWRlci1vZmZzZXQnLCAoaGVpZ2h0IC0gMSkgKyAncHgnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsICgpID0+IHsKICAgICAgICAgICAgYXBwbHlMYW5ndWFnZSgpOyAKICAgICAgICAgICAgdXBkYXRlU3RpY2t5T2Zmc2V0KCk7CiAgICAgICAgICAgIHByZWxvYWRTa2luRGF0YSgpOyAvLyBQcmVsb2FkIGRhdGEgbmdheQogICAgICAgICAgICBsb2FkQWxsKCk7CiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHVwZGF0ZVN0aWNreU9mZnNldCk7CgogICAgICAgIGZ1bmN0aW9uIGdldE5leHRNb25kYXlUaW1lc3RhbXAoKSB7CiAgICAgICAgICAgIGNvbnN0IGQgPSBuZXcgRGF0ZSgpOwogICAgICAgICAgICBkLnNldERhdGUoZC5nZXREYXRlKCkgKyAoMSArIDcgLSBkLmdldERheSgpKSAlIDcgfHwgNyk7IAogICAgICAgICAgICBkLnNldEhvdXJzKDAsIDAsIDAsIDApOwogICAgICAgICAgICByZXR1cm4gZC5nZXRUaW1lKCk7CiAgICAgICAgfQogICAgICAgIGZ1bmN0aW9uIHNhdmVUb0NhY2hlKGtleSwgZGF0YSkgewogICAgICAgICAgICBjb25zdCBjYWNoZUl0ZW0gPSB7IGRhdGE6IGRhdGEsIGV4cGlyeTogZ2V0TmV4dE1vbmRheVRpbWVzdGFtcCgpIH07CiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGBmaXNjaF9jYWNoZV8ke2tleX1gLCBKU09OLnN0cmluZ2lmeShjYWNoZUl0ZW0pKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gZ2V0RnJvbUNhY2hlKGtleSkgewogICAgICAgICAgICBjb25zdCBjYWNoZWRSYXcgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShgZmlzY2hfY2FjaGVfJHtrZXl9YCk7CiAgICAgICAgICAgIGlmICghY2FjaGVkUmF3KSByZXR1cm4gbnVsbDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlZCA9IEpTT04ucGFyc2UoY2FjaGVkUmF3KTsKICAgICAgICAgICAgICAgIGlmIChEYXRlLm5vdygpID4gY2FjaGVkLmV4cGlyeSkgewogICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGBmaXNjaF9jYWNoZV8ke2tleX1gKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWQuZGF0YTsKICAgICAgICAgICAgfSBjYXRjaCAoZSkgeyByZXR1cm4gbnVsbDsgfQogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hUZXh0V2l0aFByb3h5KHVybCkgewogICAgICAgICAgICBjb25zdCBwcm94aWVzID0gWwogICAgICAgICAgICAgICAgeyBuYW1lOiAiQ29kZVRhYnMiLCBnZXRVcmw6ICh1KSA9PiBgaHR0cHM6Ly9hcGkuY29kZXRhYnMuY29tL3YxL3Byb3h5P3F1ZXN0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHUpfWAgfSwKICAgICAgICAgICAgICAgIHsgbmFtZTogIkNvcnNMb2wiLCBnZXRVcmw6ICh1KSA9PiBgaHR0cHM6Ly9hcGkuY29ycy5sb2wvP3VybD0ke2VuY29kZVVSSUNvbXBvbmVudCh1KX1gIH0sCiAgICAgICAgICAgICAgICB7IG5hbWU6ICJDcm9zc09yaWdpbiIsIGdldFVybDogKHUpID0+IGBodHRwczovL2Nyb3Nzb3JpZ2luLm1lLyR7dX1gIH0KICAgICAgICAgICAgXTsKICAgICAgICAgICAgZm9yIChsZXQgcHJveHkgb2YgcHJveGllcykgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChwcm94eS5nZXRVcmwodXJsKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXMub2spIHRocm93IG5ldyBFcnJvcihgU3RhdHVzICR7cmVzLnN0YXR1c31gKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVzLnRleHQoKTsKICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudC5sZW5ndGggPCA1MDAgfHwgY29udGVudC5pbmNsdWRlcygiQXR0ZW50aW9uIFJlcXVpcmVkISB8IENsb3VkZmxhcmUiKSkgdGhyb3cgbmV3IEVycm9yKCJCbG9ja2VkIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnRpbnVlOyB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCJBbGwgcHJveGllcyBmYWlsZWQuIik7CiAgICAgICAgfQoKICAgICAgICAvLyAtLS0gSMOATSBQUkVMT0FEIEThu64gTEnhu4ZVIFNLSU4gLS0tCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gcHJlbG9hZFNraW5EYXRhKCkgewogICAgICAgICAgICBjb25zdCBjc3YgPSBhd2FpdCBmZXRjaFNoZWV0KCdvYnRhaW5fc2tpbicsIGZhbHNlKTsKICAgICAgICAgICAgaWYgKGNzdikgewogICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjc3Yuc3BsaXQoJ1xuJyk7CiAgICAgICAgICAgICAgICBsaW5lcy5mb3JFYWNoKGxpbmUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbHMgPSBzcGxpdENTVihsaW5lKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gY29sc1tDT0xfTUFQLm9idGFpbl9za2luLm5hbWVdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvZCA9IGNvbHNbQ09MX01BUC5vYnRhaW5fc2tpbi5yb2RdOwogICAgICAgICAgICAgICAgICAgIGlmIChuYW1lICYmIHJvZCkgewogICAgICAgICAgICAgICAgICAgICAgICBTS0lOX1JPRF9NQVBbbm9ybWFsaXplS2V5KG5hbWUpXSA9IHJvZDsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgYXN5bmMgZnVuY3Rpb24gZmV0Y2hTaGVldChrZXksIGZvcmNlVXBkYXRlKSB7CiAgICAgICAgICAgIGxldCB1cmwgPSBTSEVFVF9DT05GSUdba2V5XTsKICAgICAgICAgICAgaWYgKCF1cmwpIHsgY29uc29sZS5lcnJvcihgVGhp4bq/dSBsaW5rOiAke2tleX1gKTsgcmV0dXJuIG51bGw7IH0KICAgICAgICAgICAgY29uc3QgdGltZVN0YW1wID0gZm9yY2VVcGRhdGUgPyBgJnQ9JHtEYXRlLm5vdygpfWAgOiAnJzsKICAgICAgICAgICAgaWYgKGtleS5pbmNsdWRlcygnb2ZmaWNpYWwnKSkgewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpZE1hdGNoID0gdXJsLm1hdGNoKC9cL2RcLyhbYS16QS1aMC05LV9dKykvKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBnaWRNYXRjaCA9IHVybC5tYXRjaCgvWyMmP11naWQ9KFswLTldKykvKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzaGVldElkID0gaWRNYXRjaCA/IGlkTWF0Y2hbMV0gOiBudWxsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGdpZCA9IGdpZE1hdGNoID8gZ2lkTWF0Y2hbMV0gOiAnMCc7CiAgICAgICAgICAgICAgICAgICAgaWYoc2hlZXRJZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBndml6TGluayA9IGBodHRwczovL2RvY3MuZ29vZ2xlLmNvbS9zcHJlYWRzaGVldHMvZC8ke3NoZWV0SWR9L2d2aXovdHE/dHF4PW91dDpjc3YmZ2lkPSR7Z2lkfWA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IHJldHVybiBhd2FpdCBmZXRjaFRleHRXaXRoUHJveHkoZ3ZpekxpbmsgKyB0aW1lU3RhbXApOyB9IGNhdGNoKGUpIHsgcmV0dXJuIG51bGw7IH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoKGUpIHsgcmV0dXJuIG51bGw7IH0KICAgICAgICAgICAgfSAKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCArIHRpbWVTdGFtcCk7CiAgICAgICAgICAgICAgICBpZiAoIXJlcy5vaykgdGhyb3cgbmV3IEVycm9yKCJDT1JTIEJsb2NrZWQiKTsKICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCByZXMudGV4dCgpOwogICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICB0cnkgeyByZXR1cm4gYXdhaXQgZmV0Y2hUZXh0V2l0aFByb3h5KHVybCArIHRpbWVTdGFtcCk7IH0gY2F0Y2goZXJyKSB7IHJldHVybiBudWxsOyB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGZ1bmN0aW9uIHNwbGl0Q1NWKGxpbmUpIHsKICAgICAgICAgICAgY29uc3QgY29scyA9IGxpbmUuc3BsaXQoLywoPz0oPzooPzpbXiJdKiIpezJ9KSpbXiJdKiQpLyk7CiAgICAgICAgICAgIHJldHVybiBjb2xzLm1hcChjID0+IGMucmVwbGFjZSgvXiJ8IiQvZywgJycpLnRyaW0oKS5yZXBsYWNlKC8iIi9nLCAnIicpKTsKICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGxvYWRBbGwoZm9yY2VVcGRhdGUgPSBmYWxzZSkgewogICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YS1jb250YWluZXInKTsKICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKGltYWdlQ2FjaGUpLmxlbmd0aCA9PT0gMCB8fCBmb3JjZVVwZGF0ZSkgewogICAgICAgICAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICc8ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjsgcGFkZGluZzo0MHB4OyI+Q2hlY2tpbmcgcmVzb3VyY2VzLi4uPC9kaXY+JzsKICAgICAgICAgICAgICAgIGF3YWl0IGZldGNoSW1hZ2VzKGZvcmNlVXBkYXRlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgc2hlZXRLZXkgPSAoY3VycmVudE1vZGUgPT09ICdvZmZpY2lhbCcpID8gYG9mZmljaWFsXyR7Y3VycmVudFRhYn1gIDogYCR7Y3VycmVudE1vZGV9XyR7Y3VycmVudFRhYn1gOwogICAgICAgICAgICB1cGRhdGVIZWFkZXJzKCk7CiAgICAgICAgICAgIGNvbnN0IHRhYnNTdGQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFicy1zdGFuZGFyZCcpOwogICAgICAgICAgICBjb25zdCB0YWJzT2ZmID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RhYnMtb2ZmaWNpYWwnKTsKICAgICAgICAgICAgaWYgKHRhYnNTdGQgJiYgdGFic09mZikgewogICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAnb2ZmaWNpYWwnKSB7CiAgICAgICAgICAgICAgICAgICAgdGFic1N0ZC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyB0YWJzT2ZmLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRhYnNTdGQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgdGFic09mZi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlU3RpY2t5T2Zmc2V0LCA1MCk7CiAgICAgICAgICAgIGlmICghZm9yY2VVcGRhdGUgJiYgZGF0YUNhY2hlW3NoZWV0S2V5XSkgewogICAgICAgICAgICAgICAgcmVuZGVyRGF0YShkYXRhQ2FjaGVbc2hlZXRLZXldKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnPGRpdiBzdHlsZT0idGV4dC1hbGlnbjpjZW50ZXI7IHBhZGRpbmc6NDBweDsiPkxvYWRpbmcgZGF0YS4uLjwvZGl2Pic7CiAgICAgICAgICAgICAgICBjb25zdCBjc3YgPSBhd2FpdCBmZXRjaFNoZWV0KHNoZWV0S2V5LCBmb3JjZVVwZGF0ZSk7CiAgICAgICAgICAgICAgICBpZiAoY3N2KSB7CiAgICAgICAgICAgICAgICAgICAgZGF0YUNhY2hlW3NoZWV0S2V5XSA9IGNzdjsKICAgICAgICAgICAgICAgICAgICByZW5kZXJEYXRhKGNzdik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoSW1hZ2VzKGZvcmNlVXBkYXRlKSB7CiAgICAgICAgICAgIGNvbnN0IGNzdiA9IGF3YWl0IGZldGNoU2hlZXQoJ2ltYWdlcycsIGZvcmNlVXBkYXRlKTsKICAgICAgICAgICAgaWYgKCFjc3YpIHJldHVybjsKICAgICAgICAgICAgaW1hZ2VDYWNoZSA9IHt9OyAKICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjc3Yuc3BsaXQoJ1xuJyk7CiAgICAgICAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmaXJzdFJvd0NvbHMgPSBzcGxpdENTVihsaW5lc1swXSk7CiAgICAgICAgICAgICAgICBjb25zdCBkYXRlVmFsID0gZmlyc3RSb3dDb2xzW0NPTF9NQVAuaW1hZ2VzLmxhc3RfdXBkYXRlXTsKICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXN0LXVwZGF0ZScpLmlubmVyVGV4dCA9IGRhdGVWYWwgPyBkYXRlVmFsIDogIlVua25vd24iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gc3BsaXRDU1YobGluZSk7CiAgICAgICAgICAgICAgICBjb25zdCBuYW1lID0gY29sc1tDT0xfTUFQLmltYWdlcy5uYW1lXT8udHJpbSgpOwogICAgICAgICAgICAgICAgaWYgKG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWcxID0gY29sc1tDT0xfTUFQLmltYWdlcy5pbWcxXT8udHJpbSgpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGltZzIgPSBjb2xzW0NPTF9NQVAuaW1hZ2VzLmltZzJdPy50cmltKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lraSA9IGNvbHNbQ09MX01BUC5pbWFnZXMud2lraV0/LnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmbGFnID0gY29sc1tDT0xfTUFQLmltYWdlcy5mbGFnXT8udHJpbSgpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbm9ybWFsaXplS2V5KG5hbWUpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsdE5hbWUgPSBjb2xzW0NPTF9NQVAuaW1hZ2VzLmltZzJdPy50cmltKCk7IAogICAgICAgICAgICAgICAgICAgIGltYWdlQ2FjaGVba2V5XSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZURpc3BsYXk6IG5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVBbHQ6IGFsdE5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHVybHM6IFtpbWcxXS5maWx0ZXIodXJsID0+IHVybCAmJiB1cmwubGVuZ3RoID4gNSksIAogICAgICAgICAgICAgICAgICAgICAgICB3aWtpTGluazogd2lraSwKICAgICAgICAgICAgICAgICAgICAgICAgaXNCb2F0OiAoZmxhZyAmJiBmbGFnLmluY2x1ZGVzKCdib2F0JykpLAogICAgICAgICAgICAgICAgICAgICAgICBpc1NraW46IChmbGFnICYmIGZsYWcuaW5jbHVkZXMoJ3NraW4nKSksCiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRzOiBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICBmZXRjaGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXRWYWw6IG51bGwsCiAgICAgICAgICAgICAgICAgICAgICAgIHNoZWV0RGVtYW5kOiBudWxsCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiB1cGRhdGVIZWFkZXJzKCkgewogICAgICAgICAgICBjb25zdCBoZWFkZXJEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyLXJvdycpOwogICAgICAgICAgICBsZXQgaHRtbCA9ICcnOwogICAgICAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICdvZmZpY2lhbCcpIHsKICAgICAgICAgICAgICAgIGh0bWwgPSBgPGRpdiBzdHlsZT0iZmxleDogMjsiPiR7dCgnY29sX2l0ZW0nKX08L2Rpdj48ZGl2IHN0eWxlPSJmbGV4OiAxOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4ke3QoJ2NvbF92YWx1ZScpfTwvZGl2PjxkaXYgc3R5bGU9ImZsZXg6IDAuODsgdGV4dC1hbGlnbjogcmlnaHQ7Ij4ke3QoJ2NvbF9kZW1hbmQnKX08L2Rpdj48ZGl2IHN0eWxlPSJmbGV4OiAwLjg7IHRleHQtYWxpZ246IGNlbnRlcjsiPiR7dCgnY29sX3N0YXR1cycpfTwvZGl2PmA7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudE1vZGUgPT09ICd0aWVyJykgewogICAgICAgICAgICAgICAgaHRtbCA9IGA8ZGl2IHN0eWxlPSJmbGV4OiAyOyI+JHt0KCdjb2xfaXRlbScpfTwvZGl2PjxkaXYgc3R5bGU9ImZsZXg6IDE7IHRleHQtYWxpZ246IGNlbnRlcjsiPiR7dCgnY29sX3ZhbHVlJyl9PC9kaXY+PGRpdiBzdHlsZT0iZmxleDogMC44OyB0ZXh0LWFsaWduOiByaWdodDsiPiR7dCgnY29sX2RlbWFuZCcpfTwvZGl2PmA7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoY3VycmVudFRhYiA9PT0gJ3NraW4nKSB7CiAgICAgICAgICAgICAgICAgICAgIGh0bWwgPSBgPGRpdiBzdHlsZT0iZmxleDogMjsiPiR7dCgnY29sX3NraW4nKX08L2Rpdj48ZGl2IHN0eWxlPSJmbGV4OiAxOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4ke3QoJ2NvbF9yb2QnKX08L2Rpdj48ZGl2IHN0eWxlPSJmbGV4OiAwLjg7IHRleHQtYWxpZ246IHJpZ2h0OyI+JHt0KCdjb2xfdmFsdWUnKX08L2Rpdj5gOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgaHRtbCA9IGA8ZGl2IHN0eWxlPSJmbGV4OiAyOyI+JHt0KCdjb2xfaXRlbScpfTwvZGl2PjxkaXYgc3R5bGU9ImZsZXg6IDE7IHRleHQtYWxpZ246IGNlbnRlcjsiPjwvZGl2PjxkaXYgc3R5bGU9ImZsZXg6IDAuODsgdGV4dC1hbGlnbjogcmlnaHQ7Ij4ke3QoJ2NvbF92YWx1ZScpfTwvZGl2PmA7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGVhZGVyRGl2LmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiByZW5kZXJEYXRhKGNzdlRleHQpIHsKICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGEtY29udGFpbmVyJyk7CiAgICAgICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAnJzsKICAgICAgICAgICAgY29uc3QgbGluZXMgPSBjc3ZUZXh0LnNwbGl0KCdcbicpOwogICAgICAgICAgICBsZXQgY3VycmVudFRpZXJOYW1lID0gIiI7CiAgICAgICAgICAgIGxpbmVzLmZvckVhY2gobGluZSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoIWxpbmUudHJpbSgpKSByZXR1cm47CiAgICAgICAgICAgICAgICBjb25zdCBjb2xzID0gc3BsaXRDU1YobGluZSk7IAogICAgICAgICAgICAgICAgbGV0IG5hbWUsIGNvbDIsIGNvbDMsIGNvbDQ7CiAgICAgICAgICAgICAgICBsZXQgaXNIZWFkZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ29mZmljaWFsJykgewogICAgICAgICAgICAgICAgICAgIG5hbWUgPSBjb2xzW0NPTF9NQVAub2ZmaWNpYWwubmFtZV07IGNvbDIgPSBjb2xzW0NPTF9NQVAub2ZmaWNpYWwudmFsXTsgICAgCiAgICAgICAgICAgICAgICAgICAgY29sMyA9IGNvbHNbQ09MX01BUC5vZmZpY2lhbC5kZW1hbmRdOyBjb2w0ID0gY29sc1tDT0xfTUFQLm9mZmljaWFsLnN0YXR1c107IAogICAgICAgICAgICAgICAgICAgIGlmICgoIWNvbDIgfHwgIWNvbDIudHJpbSgpKSAmJiAoIWNvbDMgfHwgIWNvbDMudHJpbSgpKSkgaXNIZWFkZXIgPSB0cnVlOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWxRID0gY29sc1tDT0xfTUFQLnFfZmxhZ10gPyBjb2xzW0NPTF9NQVAucV9mbGFnXS50cmltKCkgOiAnJzsKICAgICAgICAgICAgICAgICAgICBpc0hlYWRlciA9ICh2YWxRICE9PSAnJyk7IAogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TW9kZSA9PT0gJ3RpZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPSBjb2xzW0NPTF9NQVAudGllci5uYW1lXTsgY29sMiA9IGNvbHNbQ09MX01BUC50aWVyLnZhbF07IGNvbDMgPSBjb2xzW0NPTF9NQVAudGllci5kZW1hbmRdOyAKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRUYWIgPT09ICdza2luJykgewogICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gY29sc1tDT0xfTUFQLm9idGFpbl9za2luLm5hbWVdOyBjb2wyID0gY29sc1tDT0xfTUFQLm9idGFpbl9za2luLnJvZF07IGNvbDMgPSBjb2xzW0NPTF9NQVAub2J0YWluX3NraW4udmFsXTsgCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGNvbHNbQ09MX01BUC5vYnRhaW5fYm9hdC5uYW1lXTsgY29sMiA9ICcnOyBjb2wzID0gY29sc1tDT0xfTUFQLm9idGFpbl9ib2F0LnZhbF07IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICghbmFtZSkgcmV0dXJuOwogICAgICAgICAgICAgICAgaWYgKG5hbWUuaW5jbHVkZXMoJ2dvb2dsZS52aXN1YWxpemF0aW9uJykgfHwgbmFtZS50b1VwcGVyQ2FzZSgpID09PSAnTkFNRScgfHwgbmFtZS50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKCdWQUxVRSBMSVNUJykpIHJldHVybjsKICAgICAgICAgICAgICAgIGlmIChpc0hlYWRlcikgewogICAgICAgICAgICAgICAgICAgIGN1cnJlbnRUaWVyTmFtZSA9IG5hbWU7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgICAgICAgICAgICAgZGl2LmNsYXNzTmFtZSA9ICd0aWVyLWhlYWRlcic7CiAgICAgICAgICAgICAgICAgICAgZGl2LnRleHRDb250ZW50ID0gbmFtZTsKICAgICAgICAgICAgICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdkYXRhLXRpZXItbmFtZScsIG5hbWUpOwogICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChkaXYpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgICAgICAgICByb3cuY2xhc3NOYW1lID0gJ3JvdyBpdGVtLWVudHJ5JzsKICAgICAgICAgICAgICAgICAgICByb3cuc2V0QXR0cmlidXRlKCdkYXRhLXBhcmVudC10aWVyJywgY3VycmVudFRpZXJOYW1lKTsKICAgICAgICAgICAgICAgICAgICBsZXQgaW50ZXJhY3Rpb25IdG1sID0gJyc7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5ID0gbm9ybWFsaXplS2V5KG5hbWUpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaW1hZ2VDYWNoZVtrZXldOwogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtRGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheVZhbCA9ICdOL0EnOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGlzcGxheURlbWFuZCA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudE1vZGUgPT09ICdvZmZpY2lhbCcpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYWwgPSBjb2wyOyBkaXNwbGF5RGVtYW5kID0gY29sMzsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50VGFiID09PSAnc2tpbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYWwgPSBjb2wzOyBkaXNwbGF5RGVtYW5kID0gY29sMjsgCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VmFsID0gY29sMzsgZGlzcGxheURlbWFuZCA9ICcnOyAKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpdGVtRGF0YS5zaGVldFZhbCA9IGRpc3BsYXlWYWw7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1EYXRhLnNoZWV0RGVtYW5kID0gZGlzcGxheURlbWFuZDsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzQ2xpY2thYmxlQm9hdCA9IGl0ZW1EYXRhLmlzQm9hdCAmJiBpdGVtRGF0YS53aWtpTGluazsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXNDbGlja2FibGVTa2luID0gaXRlbURhdGEuaXNTa2luOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzQ2xpY2thYmxlQm9hdCB8fCBpc0NsaWNrYWJsZVNraW4pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGludGVyYWN0aW9uSHRtbCA9IGA8c3BhbiBjbGFzcz0iaG92ZXItd3JhcHBlciBjbGljay10cmlnZ2VyIiBvbmNsaWNrPSJvcGVuTW9kYWwoJyR7a2V5LnJlcGxhY2UoLycvZywgIlxcJyIpfScpIj4ke25hbWV9PC9zcGFuPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbURhdGEudXJscy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWdzSnNvbiA9IEpTT04uc3RyaW5naWZ5KGl0ZW1EYXRhLnVybHMpLnJlcGxhY2UoLyIvZywgJyZxdW90OycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW50ZXJhY3Rpb25IdG1sID0gYDxzcGFuIGNsYXNzPSJob3Zlci13cmFwcGVyIGhvdmVyLXRyaWdnZXIiIG9ubW91c2VlbnRlcj0ibGF6eUxvYWRJbWcodGhpcykiIG9ubW91c2VsZWF2ZT0iaGlkZUltZyh0aGlzKSIgZGF0YS1pbWdzPSIke2ltZ3NKc29ufSI+JHtuYW1lfTxkaXYgY2xhc3M9ImhvdmVyLWltYWdlcyI+PC9kaXY+PC9zcGFuPmA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7IGludGVyYWN0aW9uSHRtbCA9IG5hbWU7IH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgeyBpbnRlcmFjdGlvbkh0bWwgPSBuYW1lOyB9CiAgICAgICAgICAgICAgICAgICAgbGV0IGV4dHJhQ29sID0gJyc7CiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRNb2RlID09PSAnb2ZmaWNpYWwnKSBleHRyYUNvbCA9IGA8ZGl2IGNsYXNzPSJjb2wtc3RhdHVzIj4ke2NvbDQgfHwgJyd9PC9kaXY+YDsKICAgICAgICAgICAgICAgICAgICByb3cuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9ImNvbC1uYW1lIj4ke2ludGVyYWN0aW9uSHRtbH08L2Rpdj48ZGl2IGNsYXNzPSJjb2wtbWlkIj4ke2NvbDIgfHwgJyd9PC9kaXY+PGRpdiBjbGFzcz0iY29sLWVuZCI+JHtjb2wzIHx8ICcnfTwvZGl2PiR7ZXh0cmFDb2x9YDsKICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQocm93KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGZpbHRlckRhdGEoKTsgCiAgICAgICAgICAgIHVwZGF0ZVN0aWNreU9mZnNldCgpOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFBBUlNFICYgQ09MT1IgTE9HSUMgLS0tCiAgICAgICAgZnVuY3Rpb24gcGFyc2VWYWx1ZURpc3BsYXkocmF3VmFsKSB7CiAgICAgICAgICAgIGlmICghcmF3VmFsKSByZXR1cm4geyBtYWluOiAnPycsIG5vdGU6ICcnIH07CiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gcmF3VmFsLm1hdGNoKC9eKFteXChdKykoLiopJC8pOyAKICAgICAgICAgICAgaWYgKG1hdGNoKSByZXR1cm4geyBtYWluOiBtYXRjaFsxXS50cmltKCksIG5vdGU6IG1hdGNoWzJdLnRyaW0oKSB9OwogICAgICAgICAgICByZXR1cm4geyBtYWluOiByYXdWYWwsIG5vdGU6ICcnIH07CiAgICAgICAgfQoKICAgICAgICBmdW5jdGlvbiBnZXRWYWx1ZUNvbG9yKHZhbFN0cikgewogICAgICAgICAgICBjb25zdCBudW1NYXRjaCA9IHZhbFN0ci5yZXBsYWNlKC8sL2csICcnKS5tYXRjaCgvKFxkKyhcLlxkKyk/KS8pOwogICAgICAgICAgICBpZiAoIW51bU1hdGNoKSByZXR1cm4gJ2xpbmVhci1ncmFkaWVudCgxMzVkZWcsICNiMmJlYzMsICNkZmU2ZTkpJzsKICAgICAgICAgICAgbGV0IG51bSA9IHBhcnNlRmxvYXQobnVtTWF0Y2hbMF0pOwogICAgICAgICAgICBpZiAodmFsU3RyLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2snKSkgbnVtICo9IDEwMDA7CiAgICAgICAgICAgIGlmICh2YWxTdHIudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnbScpKSBudW0gKj0gMTAwMDAwMDsKCiAgICAgICAgICAgIGlmIChudW0gPCAxKSByZXR1cm4gJyMyZWNjNzEnOyAKICAgICAgICAgICAgaWYgKG51bSA8PSA2KSByZXR1cm4gJyMwOTg0ZTMnOyAKICAgICAgICAgICAgaWYgKG51bSA8PSAyMCkgcmV0dXJuICcjNmM1Y2U3JzsgCiAgICAgICAgICAgIGlmIChudW0gPD0gOTkpIHJldHVybiAnI2YxYzQwZic7IAogICAgICAgICAgICBpZiAobnVtIDw9IDQ5OSkgcmV0dXJuICcjZDYzMDMxJzsgCiAgICAgICAgICAgIHJldHVybiAnbGluZWFyLWdyYWRpZW50KDQ1ZGVnLCAjZmYwMDAwLCAjZmY3MzAwLCAjZmZmYjAwLCAjNDhmZjAwLCAjMDBmZmQ1LCAjMDAyYmZmLCAjN2EwMGZmLCAjZmYwMGM4KSc7IAogICAgICAgIH0KCiAgICAgICAgZnVuY3Rpb24gcmVuZGVyTW9kYWxDb250ZW50KGl0ZW1LZXkpIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9ICh0eXBlb2YgaXRlbUtleSA9PT0gJ3N0cmluZycpID8gaW1hZ2VDYWNoZVtpdGVtS2V5XSA6IGl0ZW1LZXk7CiAgICAgICAgICAgIGNvbnN0IG1vZGFsQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1ib2R5LWNvbnRlbnQnKTsKICAgICAgICAgICAgaWYgKCFkYXRhKSByZXR1cm47CiAgICAgICAgICAgIGxldCBpbWdIdG1sID0gJyc7CiAgICAgICAgICAgIGlmIChkYXRhLnVybHMgJiYgZGF0YS51cmxzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgIGRhdGEudXJscy5mb3JFYWNoKCh1cmwsIGluZGV4KSA9PiB7IAogICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IHQoJ25vX2ltYWdlJyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuaXNTa2luKSBsYWJlbCA9ICJTa2luIjsgCiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZGF0YS51cmxzLmxlbmd0aCA+IDEpIGxhYmVsID0gKGluZGV4ID09PSAwKSA/IHQoJ2ltZ19nYW1lJykgOiB0KCdpbWdfbWVudScpOyAKICAgICAgICAgICAgICAgICAgICBpbWdIdG1sICs9IGA8ZGl2IGNsYXNzPSJpbWctYm94Ij48aW1nIHNyYz0iJHt1cmx9IiByZWZlcnJlcnBvbGljeT0ibm8tcmVmZXJyZXIiIG9uZXJyb3I9InRoaXMub25lcnJvcj1udWxsO3RoaXMuc3JjPSdodHRwczovL3BsYWNlaG9sZC5jby80MDB4MjAwP3RleHQ9Tm8rSW1hZ2UnIj48c3BhbiBjbGFzcz0iaW1nLWxhYmVsIj4ke2xhYmVsfTwvc3Bhbj48L2Rpdj5gOyAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgeyAKICAgICAgICAgICAgICAgIGltZ0h0bWwgPSBgPGRpdiBzdHlsZT0iZGlzcGxheTpmbGV4OyBmbGV4LWRpcmVjdGlvbjpjb2x1bW47IGFsaWduLWl0ZW1zOmNlbnRlcjsganVzdGlmeS1jb250ZW50OmNlbnRlcjsgaGVpZ2h0OjIwMHB4OyBjb2xvcjojOTk5OyI+PHNwYW4+JHt0KCdub19pbWFnZScpfTwvc3Bhbj48L2Rpdj5gOyAKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBzID0gZGF0YS5zdGF0cyB8fCB7IHNwZWVkOiAnPycsIHR1cm46ICc/JywgYWNjZWw6ICc/Jywgc2VhdDogJz8nIH07CiAgICAgICAgICAgIGNvbnN0IGlzRXJyb3IgPSBzLnNwZWVkID09PSAnRXJyb3InOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgcmF3VmFsdWUgPSBkYXRhLnNoZWV0VmFsIHx8ICdOL0EnOwogICAgICAgICAgICBjb25zdCBwYXJzZWRWYWwgPSBwYXJzZVZhbHVlRGlzcGxheShyYXdWYWx1ZSk7CiAgICAgICAgICAgIGNvbnN0IGJnU3R5bGUgPSBnZXRWYWx1ZUNvbG9yKHBhcnNlZFZhbC5tYWluKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExPR0lDIEzhuqRZIERFTUFORCBIT+G6tkMgUk9EIE5BTUUgVOG7qiBNQVAKICAgICAgICAgICAgbGV0IGRpc3BsYXlEZW1hbmQgPSBkYXRhLnNoZWV0RGVtYW5kIHx8ICcnOwogICAgICAgICAgICAvLyBO4bq/dSBsw6AgU2tpbiAo4bufIGLhuqV0IGvhu7MgdGFiIG7DoG8pLCBs4bqleSB0w6puIFJvZCB04burIE1BUAogICAgICAgICAgICBpZiAoZGF0YS5pc1NraW4gJiYgU0tJTl9ST0RfTUFQW25vcm1hbGl6ZUtleShkYXRhLm5hbWVEaXNwbGF5KV0pIHsKICAgICAgICAgICAgICAgIGRpc3BsYXlEZW1hbmQgPSBTS0lOX1JPRF9NQVBbbm9ybWFsaXplS2V5KGRhdGEubmFtZURpc3BsYXkpXTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3Qgc3RhdHNTZWN0aW9uID0gZGF0YS5pc1NraW4gPyBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0YXQtbGFiZWwiPiR7dCgnY29sX3JvZCcpfTo8L3NwYW4+CiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InN0YXQtdmFsdWUiPiR7ZGlzcGxheURlbWFuZCB8fCAnPyd9PC9zcGFuPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIGAgOiBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4gY2xhc3M9InN0YXQtbGFiZWwiPiR7dCgnc3RhdF9wcmljZScpfTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJzdGF0LXZhbHVlIiBzdHlsZT0iY29sb3I6I2UxNzA1NSI+JHtzLnByaWNlIHx8ICc/J308L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4gY2xhc3M9InN0YXQtbGFiZWwiPiR7dCgnc3RhdF9zcGVlZCcpfTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJzdGF0LXZhbHVlIj4ke3Muc3BlZWR9PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuIGNsYXNzPSJzdGF0LWxhYmVsIj4ke3QoJ3N0YXRfdHVybicpfTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJzdGF0LXZhbHVlIj4ke3MudHVybn08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJzdGF0LXJvdyI+PHNwYW4gY2xhc3M9InN0YXQtbGFiZWwiPiR7dCgnc3RhdF9hY2NlbCcpfTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJzdGF0LXZhbHVlIj4ke3MuYWNjZWx9PC9zcGFuPjwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ic3RhdC1yb3ciPjxzcGFuIGNsYXNzPSJzdGF0LWxhYmVsIj4ke3QoJ3N0YXRfc2VhdCcpfTo8L3NwYW4+IDxzcGFuIGNsYXNzPSJzdGF0LXZhbHVlIj4ke3Muc2VhdH08L3NwYW4+PC9kaXY+CiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIAogICAgICAgICAgICBjb25zdCB0YXJnZXRMaW5rID0gZGF0YS5pc1NraW4gPyAnaHR0cHM6Ly9maXNjaGlwZWRpYS5vcmcvd2lraS9Ta2lucycgOiAoZGF0YS53aWtpTGluayB8fCAnaHR0cHM6Ly9maXNjaGlwZWRpYS5vcmcnKTsKCiAgICAgICAgICAgIG1vZGFsQm9keS5pbm5lckhUTUwgPSBgCiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPSJtb2RhbC1sZWZ0IiBpZD0ibW9kYWwtaW1hZ2VzLWNvbnRhaW5lciI+JHtpbWdIdG1sfTwvZGl2PgogICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtcmlnaHQiPgogICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Im1vZGFsLWhlYWRlci1pbmZvIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0idmFsdWUtY2lyY2xlIiBzdHlsZT0iYmFja2dyb3VuZDogJHtiZ1N0eWxlfTsiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9InZhbC1udW0iPiR7cGFyc2VkVmFsLm1haW59PC9zcGFuPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwYXJzZWRWYWwubm90ZSA/IGA8c3BhbiBjbGFzcz0idmFsLW5vdGUiPiR7cGFyc2VkVmFsLm5vdGV9PC9zcGFuPmAgOiAnJ30KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICR7IWRhdGEuaXNTa2luICYmIGRpc3BsYXlEZW1hbmQgPyBgPGRpdiBjbGFzcz0iZGVtYW5kLWluZm8iPiR7ZGlzcGxheURlbWFuZH08L2Rpdj5gIDogJyd9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9kYWwtdGl0bGUiPgogICAgICAgICAgICAgICAgICAgICAgICAke3QoJ21vZGFsX3RpdGxlX3dpa2knKX0gCiAgICAgICAgICAgICAgICAgICAgICAgICR7aXNFcnJvciAmJiAhZGF0YS5pc1NraW4gPyAnPHNwYW4gc3R5bGU9ImNvbG9yOnJlZDsgZm9udC1zaXplOjAuNmVtIj4oRXJyb3IpPC9zcGFuPicgOiAnJ30KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8ZGl2IGlkPSJtb2RhbC1zdGF0cy1jb250YWluZXIiPgogICAgICAgICAgICAgICAgICAgICAgICAke2lzRXJyb3IgJiYgIWRhdGEuaXNTa2luID8gYDxkaXYgc3R5bGU9ImNvbG9yOiNkNjMwMzE7IHBhZGRpbmc6MTBweDsgYmFja2dyb3VuZDojZmZlYWE3OyBib3JkZXItcmFkaXVzOjhweDsgbWFyZ2luLWJvdHRvbToxMHB4OyBmb250LXNpemU6MC45ZW07Ij4ke3QoJ2Vycm9yX3Byb3h5Jyl9PC9kaXY+YCA6ICcnfQogICAgICAgICAgICAgICAgICAgICAgICAke3N0YXRzU2VjdGlvbn0KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDoyMHB4OyBmb250LXNpemU6MC45ZW07IHRleHQtYWxpZ246cmlnaHQiPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj0iJHt0YXJnZXRMaW5rfSIgdGFyZ2V0PSJfYmxhbmsiIHN0eWxlPSJjb2xvcjp3aGl0ZTsgYmFja2dyb3VuZDojMDk4NGUzOyBwYWRkaW5nOjhweCAxNXB4OyBib3JkZXItcmFkaXVzOjRweDsgdGV4dC1kZWNvcmF0aW9uOm5vbmU7IGRpc3BsYXk6aW5saW5lLWJsb2NrOyI+JHt0KCdvcGVuX3dpa2knKX0g4oaXPC9hPgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICBgOwogICAgICAgIH0KCiAgICAgICAgLy8gLS0tIFNDUkFQRVIgLS0tCiAgICAgICAgZnVuY3Rpb24gZ2V0RmlzY2hTdGF0cyhkb2MsIGxhYmVsKSB7IGNvbnN0IGhlYWRpbmdzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRhLWhlYWRpbmcnKTsgZm9yIChsZXQgaCBvZiBoZWFkaW5ncykgeyBpZiAoaC50ZXh0Q29udGVudC50cmltKCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsYWJlbC50b0xvd2VyQ2FzZSgpKSkgeyBsZXQgc2libGluZyA9IGgubmV4dEVsZW1lbnRTaWJsaW5nOyBpZiAoc2libGluZyAmJiBzaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygnZGF0YS1jb250ZW50JykpIHJldHVybiBzaWJsaW5nLnRleHRDb250ZW50LnRyaW0oKTsgfSB9IHJldHVybiAnPyc7IH0KICAgICAgICBmdW5jdGlvbiBnZXRGaXNjaFByaWNlKGRvYykgeyBjb25zdCBoZWFkaW5ncyA9IGRvYy5xdWVyeVNlbGVjdG9yQWxsKCcuZGF0YS1oZWFkaW5nJyk7IGZvciAobGV0IGggb2YgaGVhZGluZ3MpIHsgaWYgKGgudGV4dENvbnRlbnQudHJpbSgpLnRvTG93ZXJDYXNlKCkgPT09ICdwcmljZScpIHsgbGV0IGNvbnRlbnROb2RlID0gaC5uZXh0RWxlbWVudFNpYmxpbmc7IGlmIChjb250ZW50Tm9kZSkgeyBjb25zdCBpc1JvYnV4ID0gY29udGVudE5vZGUucXVlcnlTZWxlY3RvcignaW1nW2FsdCo9IlJvYnV4Il0sIHNwYW5bdGl0bGU9IlJvYnV4Il0nKTsgbGV0IHByaWNlVGV4dCA9IGNvbnRlbnROb2RlLnRleHRDb250ZW50LnRyaW0oKTsgaWYgKGlzUm9idXgpIHJldHVybiBwcmljZVRleHQgKyAiIFJvYnV4IjsgcmV0dXJuIHByaWNlVGV4dDsgfSB9IH0gcmV0dXJuICc/JzsgfQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIGZldGNoSGlnaFJlc0ltYWdlKGZpbGVQYWdlVXJsKSB7IGlmICghZmlsZVBhZ2VVcmwpIHJldHVybiBudWxsOyB0cnkgeyBjb25zdCBmdWxsVXJsID0gImh0dHBzOi8vZmlzY2hpcGVkaWEub3JnIiArIGZpbGVQYWdlVXJsOyBjb25zdCBodG1sID0gYXdhaXQgZmV0Y2hUZXh0V2l0aFByb3h5KGZ1bGxVcmwpOyBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7IGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpOyBjb25zdCBsaW5rID0gZG9jLnF1ZXJ5U2VsZWN0b3IoJy5mdWxsSW1hZ2VMaW5rIGEnKTsgaWYgKGxpbmspIHsgbGV0IHNyYyA9IGxpbmsuZ2V0QXR0cmlidXRlKCdocmVmJyk7IGlmIChzcmMuc3RhcnRzV2l0aCgnLy8nKSkgc3JjID0gJ2h0dHBzOicgKyBzcmM7IHJldHVybiBzcmM7IH0gfSBjYXRjaChlKSB7fSByZXR1cm4gbnVsbDsgfQogICAgICAgIGFzeW5jIGZ1bmN0aW9uIG9wZW5Nb2RhbChpdGVtS2V5KSB7CiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luZm8tbW9kYWwnKTsKICAgICAgICAgICAgY29uc3QgbW9kYWxCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vZGFsLWJvZHktY29udGVudCcpOwogICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbC1pdGVtLW5hbWUnKTsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGltYWdlQ2FjaGVbaXRlbUtleV07IAogICAgICAgICAgICBpZiAoIWRhdGEpIHJldHVybjsKICAgICAgICAgICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpOwogICAgICAgICAgICB0aXRsZS5pbm5lclRleHQgPSBkYXRhLm5hbWVEaXNwbGF5OwogICAgICAgICAgICBjb25zdCBjYWNoZWREYXRhID0gZ2V0RnJvbUNhY2hlKGl0ZW1LZXkpOwogICAgICAgICAgICBpZiAoY2FjaGVkRGF0YSkgewogICAgICAgICAgICAgICAgZGF0YS5zdGF0cyA9IGNhY2hlZERhdGEuc3RhdHM7CiAgICAgICAgICAgICAgICBkYXRhLnVybHMgPSBjYWNoZWREYXRhLnVybHM7CiAgICAgICAgICAgICAgICBkYXRhLmZldGNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgcmVuZGVyTW9kYWxDb250ZW50KGl0ZW1LZXkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgoIWRhdGEuZmV0Y2hlZCB8fCAoZGF0YS5zdGF0cyAmJiBkYXRhLnN0YXRzLnNwZWVkID09PSAnRXJyb3InKSkgJiYgKGRhdGEud2lraUxpbmsgfHwgZGF0YS5pc1NraW4pKSB7CiAgICAgICAgICAgICAgICBtb2RhbEJvZHkuaW5uZXJIVE1MID0gYDxkaXYgY2xhc3M9Im1vZGFsLWxvYWRpbmciPjxkaXYgY2xhc3M9InNwaW5uZXIiPjwvZGl2PjxkaXY+JHt0KCdtb2RhbF9sb2FkaW5nJyl9PC9kaXY+PHNtYWxsIHN0eWxlPSJmb250LXNpemU6MC44ZW07IG9wYWNpdHk6MC43Ij4ke3QoJ21vZGFsX2xvYWRpbmdfc3ViJyl9PC9zbWFsbD48L2Rpdj5gOwogICAgICAgICAgICAgICAgYXdhaXQgc2NyYXBlV2lraURhdGEoaXRlbUtleSwgZGF0YS53aWtpTGluayk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmVuZGVyTW9kYWxDb250ZW50KGl0ZW1LZXkpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBhc3luYyBmdW5jdGlvbiBzY3JhcGVXaWtpRGF0YShpdGVtS2V5LCB3aWtpVXJsKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBpZiAoaW1hZ2VDYWNoZVtpdGVtS2V5XS5pc1NraW4pIHsKICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc0ZldGNoZWRTa2lucykgewogICAgICAgICAgICAgICAgICAgICAgICBpbWFnZUNhY2hlW2l0ZW1LZXldLmZldGNoZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICBjb25zdCBza2luVXJsID0gImh0dHBzOi8vZmlzY2hpcGVkaWEub3JnL3dpa2kvU2tpbnMiOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCBmZXRjaFRleHRXaXRoUHJveHkoc2tpblVybCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgJ3RleHQvaHRtbCcpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IHdpa2lJbWFnZU1hcCA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbWdzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5tdy1wYXJzZXItb3V0cHV0IGltZycpOwoKICAgICAgICAgICAgICAgICAgICBpbWdzLmZvckVhY2goaW1nID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5hbWUgPSBpbWcuZ2V0QXR0cmlidXRlKCdhbHQnKSB8fCBpbWcuY2xvc2VzdCgnYScpPy5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChuYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3Jjc2V0ID0gaW1nLmdldEF0dHJpYnV0ZSgnc3Jjc2V0JykgfHwgJyc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3Jjc2V0LmluY2x1ZGVzKCc0MDBweC0nKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gc3Jjc2V0Lm1hdGNoKC8oXC9cL1tcdy4tXStcL2Zpc2Nod2lraVwvdGh1bWJcL1teIF0rXC80MDBweC1bXiBdK1wucG5nKS8pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKG1hdGNoKSBzcmMgPSBtYXRjaFsxXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3JjKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHJhd1NyYyA9IGltZy5nZXRBdHRyaWJ1dGUoJ3NyYycpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyYXdTcmMgJiYgcmF3U3JjLmluY2x1ZGVzKCcvdGh1bWIvJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjID0gcmF3U3JjLnJlcGxhY2UoL1wvXGQrcHgtLywgJy80MDBweC0nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSByYXdTcmM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3JjKSB3aWtpSW1hZ2VNYXAuc2V0KG5hbWUsIHNyYyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoaW1hZ2VDYWNoZSkuZm9yRWFjaChrID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGltYWdlQ2FjaGVba107CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmlzU2tpbikgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0TmFtZXMgPSBbaXRlbS5uYW1lRGlzcGxheSwgaXRlbS5uYW1lQWx0XS5maWx0ZXIobiA9PiBuKS5tYXAobiA9PiBuLnRvTG93ZXJDYXNlKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgdE5hbWUgb2YgdGFyZ2V0TmFtZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2lraUltYWdlTWFwLmhhcyh0TmFtZSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVybCA9IHdpa2lJbWFnZU1hcC5nZXQodE5hbWUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih1cmwuc3RhcnRzV2l0aCgnLy8nKSkgdXJsID0gJ2h0dHBzOicgKyB1cmw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLnVybHMgPSBbdXJsXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5zdGF0cyA9IHt9OyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5mZXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZVRvQ2FjaGUoaywgeyBzdGF0czoge30sIHVybHM6IFt1cmxdIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgd2luZG93Lmhhc0ZldGNoZWRTa2lucyA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOyAKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0VXJsID0gd2lraVVybDsKICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0VXJsLmluY2x1ZGVzKCdmaXNjaGlwZWRpYS5vcmcnKSkgewogICAgICAgICAgICAgICAgICAgICBsZXQgcGFnZU5hbWUgPSBpbWFnZUNhY2hlW2l0ZW1LZXldLm5hbWVEaXNwbGF5LnJlcGxhY2UoLyAvZywgJ18nKTsKICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0VXJsID0gYGh0dHBzOi8vZmlzY2hpcGVkaWEub3JnL3dpa2kvJHtwYWdlTmFtZX1gOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgaHRtbCA9IGF3YWl0IGZldGNoVGV4dFdpdGhQcm94eSh0YXJnZXRVcmwpOwogICAgICAgICAgICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpOwogICAgICAgICAgICAgICAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhodG1sLCAndGV4dC9odG1sJyk7CiAgICAgICAgICAgICAgICBjb25zdCBzdGF0cyA9IHsKICAgICAgICAgICAgICAgICAgICBzcGVlZDogZ2V0RmlzY2hTdGF0cyhkb2MsICdTcGVlZCcpLAogICAgICAgICAgICAgICAgICAgIHR1cm46ICBnZXRGaXNjaFN0YXRzKGRvYywgJ1N0ZWVyaW5nJyksCiAgICAgICAgICAgICAgICAgICAgYWNjZWw6IGdldEZpc2NoU3RhdHMoZG9jLCAnQWNjZWxlcmF0aW9uJyksCiAgICAgICAgICAgICAgICAgICAgc2VhdDogIGdldEZpc2NoU3RhdHMoZG9jLCAnU2VhdHMnKSwKICAgICAgICAgICAgICAgICAgICBwcmljZTogZ2V0RmlzY2hQcmljZShkb2MpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgbGV0IGdhbWVJbWdGaWxlVXJsID0gbnVsbCwgbWVudUltZ0ZpbGVVcmwgPSBudWxsOwogICAgICAgICAgICAgICAgY29uc3QgdGFibGVzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RhYmxlLndpa2l0YWJsZScpOwogICAgICAgICAgICAgICAgdGFibGVzLmZvckVhY2godGFibGUgPT4gewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsKCd0aCcpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGQnKTsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzLmZvckVhY2goKHRoLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0eHQgPSB0aC50ZXh0Q29udGVudC50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsID0gY2VsbHNbaW5kZXhdOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2VsbCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluayA9IGNlbGwucXVlcnlTZWxlY3RvcignYVtocmVmXj0iL3dpa2kvRmlsZToiXScpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmspIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBocmVmID0gbGluay5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHh0LmluY2x1ZGVzKCdnYW1lJykpIGdhbWVJbWdGaWxlVXJsID0gaHJlZjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eHQuaW5jbHVkZXMoJ21lbnUnKSB8fCB0eHQuaW5jbHVkZXMoJ3NoaXB3cmlnaHQnKSkgbWVudUltZ0ZpbGVVcmwgPSBocmVmOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGlmICghbWVudUltZ0ZpbGVVcmwpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBtYWluVGh1bWIgPSBkb2MucXVlcnlTZWxlY3RvcignLmluZm9ib3gtaW1hZ2UgYS5pbWFnZScpOwogICAgICAgICAgICAgICAgICAgIGlmIChtYWluVGh1bWIpIG1lbnVJbWdGaWxlVXJsID0gbWFpblRodW1iLmdldEF0dHJpYnV0ZSgnaHJlZicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgW2ltZ0dhbWUsIGltZ01lbnVdID0gYXdhaXQgUHJvbWlzZS5hbGwoWwogICAgICAgICAgICAgICAgICAgIGZldGNoSGlnaFJlc0ltYWdlKGdhbWVJbWdGaWxlVXJsKSwKICAgICAgICAgICAgICAgICAgICBmZXRjaEhpZ2hSZXNJbWFnZShtZW51SW1nRmlsZVVybCkKICAgICAgICAgICAgICAgIF0pOwogICAgICAgICAgICAgICAgY29uc3QgZmluYWxVcmxzID0gW2ltZ0dhbWUsIGltZ01lbnVdLmZpbHRlcih1ID0+IHUpOwogICAgICAgICAgICAgICAgaWYgKGZpbmFsVXJscy5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGh1bWJzID0gZG9jLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbmZvYm94LWltYWdlIGltZywgLndpa2l0YWJsZSBpbWcnKTsKICAgICAgICAgICAgICAgICAgICAgdGh1bWJzLmZvckVhY2goaW1nID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzcmMgPSBpbWcuZ2V0QXR0cmlidXRlKCdzcmMnKTsKICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyYykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNyYy5zdGFydHNXaXRoKCcvLycpKSBzcmMgPSAnaHR0cHM6JyArIHNyYzsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcmMgPSBzcmMucmVwbGFjZSgnL3RodW1iLycsICcvJykucmVwbGFjZSgvXC9cZCtweC0uKyQvLCAnJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxVcmxzLnB1c2goc3JjKTsKICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCB1bmlxdWVVcmxzID0gWy4uLm5ldyBTZXQoZmluYWxVcmxzKV07CiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVG9DYWNoZSA9IHsgc3RhdHM6IHN0YXRzLCB1cmxzOiB1bmlxdWVVcmxzIH07CiAgICAgICAgICAgICAgICBzYXZlVG9DYWNoZShpdGVtS2V5LCBkYXRhVG9DYWNoZSk7CiAgICAgICAgICAgICAgICBpbWFnZUNhY2hlW2l0ZW1LZXldLnN0YXRzID0gc3RhdHM7CiAgICAgICAgICAgICAgICBpZiAodW5pcXVlVXJscy5sZW5ndGggPiAwKSBpbWFnZUNhY2hlW2l0ZW1LZXldLnVybHMgPSB1bmlxdWVVcmxzOwogICAgICAgICAgICAgICAgaW1hZ2VDYWNoZVtpdGVtS2V5XS5mZXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJbU2NyYXBlcl0gRXJyb3I6IiwgZXJyKTsKICAgICAgICAgICAgICAgIGltYWdlQ2FjaGVbaXRlbUtleV0uc3RhdHMgPSB7IHNwZWVkOiAnRXJyb3InLCB0dXJuOiAnRXJyb3InLCBhY2NlbDogJ0Vycm9yJywgc2VhdDogJ0Vycm9yJyB9OwogICAgICAgICAgICAgICAgaW1hZ2VDYWNoZVtpdGVtS2V5XS5mZXRjaGVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiByZXF1ZXN0UmVsb2FkKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybS1tb2RhbCcpLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTsgfQogICAgICAgIGZ1bmN0aW9uIGNsb3NlQ29uZmlybU1vZGFsKCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29uZmlybS1tb2RhbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsgfQogICAgICAgIGZ1bmN0aW9uIGV4ZWN1dGVSZWxvYWQoKSB7CiAgICAgICAgICAgIGNsb3NlQ29uZmlybU1vZGFsKCk7CiAgICAgICAgICAgIGNvbnN0IGJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWZyZXNoLWJ0bicpOwogICAgICAgICAgICBidG4uc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgzNjBkZWcpJzsKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBidG4uc3R5bGUudHJhbnNmb3JtID0gJycsIDUwMCk7CiAgICAgICAgICAgIGxldCBzaGVldEtleSA9IChjdXJyZW50TW9kZSA9PT0gJ29mZmljaWFsJykgPyBgb2ZmaWNpYWxfJHtjdXJyZW50VGFifWAgOiBgJHtjdXJyZW50TW9kZX1fJHtjdXJyZW50VGFifWA7CiAgICAgICAgICAgIGRhdGFDYWNoZVtzaGVldEtleV0gPSBudWxsOwogICAgICAgICAgICBPYmplY3Qua2V5cyhsb2NhbFN0b3JhZ2UpLmZvckVhY2goa2V5ID0+IHsgaWYoa2V5LnN0YXJ0c1dpdGgoJ2Zpc2NoX2NhY2hlXycpKSBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpOyB9KTsKICAgICAgICAgICAgbG9hZEFsbCh0cnVlKTsKICAgICAgICB9CiAgICAgICAgZnVuY3Rpb24gY2xvc2VNb2RhbChldmVudCkgeyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5mby1tb2RhbCcpLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTsgfQogICAgICAgIHdpbmRvdy5sYXp5TG9hZEltZyA9IGZ1bmN0aW9uKGVsKSB7IC8qIC4uLiAqLyBjb25zdCBjb250YWluZXIgPSBlbC5xdWVyeVNlbGVjdG9yKCcuaG92ZXItaW1hZ2VzJyk7IGlmIChjb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkgcmV0dXJuOyBjb25zdCBpbWdzRGF0YSA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1pbWdzJyk7IGlmICghaW1nc0RhdGEpIHJldHVybjsgY29uc3QgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOyBjb250YWluZXIuc3R5bGUudG9wID0gKHJlY3QuYm90dG9tICsgMTApICsgJ3B4JzsgY29udGFpbmVyLnN0eWxlLmxlZnQgPSAocmVjdC5sZWZ0ICsgMjApICsgJ3B4JzsgY29uc3QgaW1ncyA9IEpTT04ucGFyc2UoaW1nc0RhdGEpOyBjb25zdCBncmlkQ2xhc3MgPSBpbWdzLmxlbmd0aCA9PT0gMSA/ICdzaW5nbGUtaW1nJyA6ICdkb3VibGUtaW1nJzsgY29udGFpbmVyLmNsYXNzTmFtZSA9IGBob3Zlci1pbWFnZXMgYWN0aXZlICR7Z3JpZENsYXNzfWA7IGlmICghY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSkgeyBsZXQgaHRtbCA9ICcnOyBpbWdzLmZvckVhY2godXJsID0+IHsgaHRtbCArPSBgPGRpdiBjbGFzcz0iaW1nLWJveCI+PGltZyBzcmM9IiR7dXJsfSIgcmVmZXJyZXJwb2xpY3k9Im5vLXJlZmVycmVyIj48L2Rpdj5gOyB9KTsgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7IH0gfQogICAgICAgIHdpbmRvdy5oaWRlSW1nID0gZnVuY3Rpb24oZWwpIHsgY29uc3QgY29udGFpbmVyID0gZWwucXVlcnlTZWxlY3RvcignLmhvdmVyLWltYWdlcycpOyBpZiAoY29udGFpbmVyKSB7IGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsgfSB9CiAgICAgICAgZnVuY3Rpb24gc3dpdGNoTW9kZShtb2RlKSB7IGN1cnJlbnRNb2RlID0gbW9kZTsgaWYgKG1vZGUgPT09ICdvZmZpY2lhbCcpIHsgY3VycmVudFRhYiA9ICdjb3NtZXRpYyc7IH0gZWxzZSB7IGN1cnJlbnRUYWIgPSAnYm9hdCc7IH0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1vZGUtYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9kZS0nICsgbW9kZSkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyBjb25zdCB0YWJCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLScgKyBjdXJyZW50VGFiKTsgaWYodGFiQnRuKSB0YWJCdG4uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IGxvYWRBbGwoZmFsc2UpOyB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7IH0KICAgICAgICBmdW5jdGlvbiBzd2l0Y2hUYWIodGFiKSB7IGN1cnJlbnRUYWIgPSB0YWI7IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YWItYnRuJykuZm9yRWFjaChiID0+IGIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpOyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGFiLScgKyB0YWIpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOyBsb2FkQWxsKGZhbHNlKTsgd2luZG93LnNjcm9sbFRvKDAsIDApOyB9CiAgICAgICAgZnVuY3Rpb24gZmlsdGVyRGF0YSgpIHsgY29uc3QgZmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaElucHV0JykudmFsdWUudG9VcHBlckNhc2UoKS50cmltKCk7IGNvbnN0IGl0ZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLml0ZW0tZW50cnknKTsgY29uc3QgdGllcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGllci1oZWFkZXInKTsgbGV0IHZpc2libGVUaWVycyA9IG5ldyBTZXQoKTsgaXRlbXMuZm9yRWFjaChpdGVtID0+IHsgY29uc3QgdHh0TmFtZSA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmNvbC1uYW1lJykudGV4dENvbnRlbnQgfHwgIiI7IGNvbnN0IHR4dE1pZCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmNvbC1taWQnKS50ZXh0Q29udGVudCB8fCAiIjsgaWYgKHR4dE5hbWUudG9VcHBlckNhc2UoKS5pbmNsdWRlcyhmaWx0ZXIpIHx8IHR4dE1pZC50b1VwcGVyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlcikpIHsgaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOyBjb25zdCBwYXJlbnRUaWVyID0gaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGFyZW50LXRpZXInKTsgaWYgKHBhcmVudFRpZXIpIHZpc2libGVUaWVycy5hZGQocGFyZW50VGllcik7IH0gZWxzZSB7IGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJzsgfSB9KTsgdGllcnMuZm9yRWFjaCh0aWVyID0+IHsgdGllci5zdHlsZS5kaXNwbGF5ID0gKGZpbHRlciA9PT0gIiIgfHwgdmlzaWJsZVRpZXJzLmhhcyh0aWVyLmdldEF0dHJpYnV0ZSgnZGF0YS10aWVyLW5hbWUnKSkpID8gJ2Jsb2NrJyA6ICdub25lJzsgfSk7IHVwZGF0ZVN0aWNreU9mZnNldCgpOyB9CiAgICA8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+"))));</script>